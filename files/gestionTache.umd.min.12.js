(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[12],{b1c1:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("AddNew",{ref:"addClient",attrs:{plusColor:"info",selectOption:t.selectOption},on:{"load-list-client":t.LoadClient}}),n("CRow",[n("CCol",{staticClass:"mt-3 mb-2"},[n("ClientList",{attrs:{title:"Liste des Clients",items:t.itemsClient,isLoading:t.cisloading,tableFields:t.fieldsClient},on:{"data-to-edite":t.DataToEdit,"suppression-ok":t.LoadClient}})],1)],1),n("AddNew",{ref:"addSte",attrs:{plusColor:"dark",modalType:!1,modalTitle:"Nouvelle Société",selectOption:t.selectOption},on:{"load-list-ste":t.LoadSte}}),n("CRow",[n("CCol",{staticClass:"mt-3"},[n("ClientList",{attrs:{title:"Liste des Sociétés",items:t.itemsSte,isLoading:t.sisloading,tableFields:t.fieldsSte},on:{"data-to-edite":t.DataToEditSte,"suppression-ok":t.LoadSte}})],1)],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CCard",[n("CCardHeader",[t._v(" "+t._s(t.title)+" "),n("div",{staticClass:"card-header-actions"},[n("a",{staticClass:"card-header-action",attrs:{href:"#",rel:"noreferrer noopener",target:"_blank"}},[n("small",{staticClass:"text-muted"})])])]),n("CCardBody",{},[n("CDataTable",{staticClass:"m-0 table-borderless",attrs:{hover:"",responsive:!1,loading:t.isLoading,items:t.items,fields:t.tableFields,header:!1,cleaner:"","table-filter":"","items-per-page-select":"","items-per-page":5,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var o=e.item;return n("td",{},[n("div",[n("CLink",{staticClass:"text-decoration-none",attrs:{to:{path:"#"}}},[t._v(" "+t._s(o.titre)+" ")])],1),n("div",{staticClass:"small text-muted mt-1"},[n("span",[[t._v("New")],t._e()],2),t._v(" | Crée le: "+t._s(o.created_at)+" ")])])}},{key:"usage",fn:function(e){var o=e.item;return n("td",{},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"float-left"}),n("div",{staticClass:"float-right"},[n("small",{staticClass:"text-bold"},[n("strong",[t._v("Updated: ")]),t._v(" "+t._s(o.update_at))])])])])}},{key:"activity",fn:function(e){var o=e.item;return n("td",{},[n("CRow",{staticClass:"ml-4 d-flex justify-content-arround flex-nowrap"},[n("CButton",{staticClass:"mx-1",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.EditEntity(o)}}},[n("CIcon",{staticClass:"mr-1 text-info",attrs:{name:"cilPencil"}})],1),n("CButton",{staticClass:"mx-1 text-danger",attrs:{color:"dark",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.DeleteModalOn(o)}}},[n("CIcon",{staticClass:"mr-1 text-danger",attrs:{name:"cil-x-circle"}})],1)],1)],1)}}])})],1)],1),n("CModal",{attrs:{title:"Confirmer la suppression",color:"danger",show:t.deleteModal,closeOnBackdrop:!1},on:{"update:show":function(e){t.deleteModal=e}}},[t._v(" êtes vous sûre de vouloir supprimer ce contenu? "),n("br"),n("small",{staticClass:"mt-2 text-center"},[t._v("Cette action est irréversible.")]),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.deleteModal=!1}}},[t._v("Cancel")]),n("CButton",{staticClass:"mx-1",attrs:{color:"danger",desabled:""},on:{click:t.deleteEntity}},[t._v("Supprimer"),t.loading?n("CSpinner",{staticClass:"ml-1",staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"primary"}}):t._e()],1)],1)])],2)],1)},s=[],r=n("d111"),l=n("b8a6"),c={props:{items:{type:Array,required:!0,default:function(){return[]}},title:{type:String,required:!0,default:"title"},isLoading:{type:Boolean,default:!0},tableFields:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{tableFieldse:[{key:"nom",_style:"min-width:550px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"activity",_style:"width:600px;"}],deleteModal:!1,loading:!1,id:""}},methods:{DeleteModalOn:function(t){this.deleteModal=!0,t.idclient,this.id=t},deleteEntity:function(){var t=this;this.loading=!0,r["a"].formatDeleteClient(this.id).then((function(e){console.log(" deleteProject : ",e),l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&t.$emit("suppression-ok"),t.loading=!1,0==t.loading&&(t.deleteModal=!1)})).catch((function(t){console.log("error",t)}))}))},EditEntity:function(t){this.$emit("data-to-edite",t)}}},d=c,u=n("2877"),p=Object(u["a"])(d,a,s,!1,null,null,null),f=p.exports,m=n("f0ae"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CRow",{staticClass:"ml-2 mt-n2 d-flex",attrs:{alignVertical:"center"}},[n("CButton",{attrs:{size:"sm",color:t.plusColor,shape:"pill"},on:{click:t.modalAddOn}},[n("CIcon",{staticClass:"text-white",attrs:{name:"cilPlus",height:35,size:"xl"}})],1),n("h6",{staticClass:"ml-1 mt-1"},[t._v("Nouveau Client")])],1),n("CModal",{attrs:{size:"lg",title:t.modalTitle,color:t.plusColor,show:t.modalAdd,footer:!1},on:{"update:show":function(e){t.modalAdd=e}}},[n("PopUpClient",{ref:"pop",attrs:{modalType:t.modalType,btnState:t.btnStateAdd,formValues:t.dataToEdit,selectOption:t.selectOption},on:{"load-list-client":t.loadListClient,"load-list-ste":t.loadListSte}}),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.modalAdd=!1}}},[t._v(" Cancel ")]),n("CButton",{staticClass:"mx-1",attrs:{color:t.btnStateAdd.state?t.plusColor:"light"},on:{click:t.PostNewClient}},[t._v(" Add ")])],1)])],2)],1)},v=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"check-valid-form":t.checkForSave}},[n("div",{staticClass:"pl-sm-2"},[n("CRow",[n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Name:",placeholder:t.modalType?"Nom du client":"Nom de la société",wasValidated:t.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.inputValidation,autocomplete:"name"},model:{value:t.postData.nom,callback:function(e){t.$set(t.postData,"nom",e)},expression:"postData.nom"}})],1),t.modalType?n("CCol",{attrs:{sm:"5"}},[n("CInput",{attrs:{label:"Prenom:",placeholder:"Prenom"},model:{value:t.postData.prenom,callback:function(e){t.$set(t.postData,"prenom",e)},expression:"postData.prenom"}})],1):t._e(),n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Adresse:",placeholder:"Adresse"},model:{value:t.postData.adresse,callback:function(e){t.$set(t.postData,"adresse",e)},expression:"postData.adresse"}})],1),t.modalType?n("CCol",{attrs:{sm:"3"}},[n("CInput",{attrs:{label:"Uid:",placeholder:"uid",type:"number"},model:{value:t.postData.uid,callback:function(e){t.$set(t.postData,"uid",e)},expression:"postData.uid"}})],1):t._e(),n("CCol",{attrs:{sm:"5"}},[n("CInput",{attrs:{label:"Phone:",placeholder:"Phone"},model:{value:t.postData.phone,callback:function(e){t.$set(t.postData,"phone",e)},expression:"postData.phone"}})],1),t.modalType?t._e():n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Email:",placeholder:"Email",type:"email",required:"",wasValidated:t.eValidated,validFeedback:"ok",invalidFeedback:"Veuiller entrer un email valide",isValid:t.emailValidation},model:{value:t.postData.email,callback:function(e){t.$set(t.postData,"email",e)},expression:"postData.email"}})],1),t.modalType?t._e():n("CCol",{attrs:{sm:"7"}},[n("CInput",{attrs:{label:"Site Web:",placeholder:"Site Web"},model:{value:t.postData.siteweb,callback:function(e){t.$set(t.postData,"siteweb",e)},expression:"postData.siteweb"}})],1),t.modalType?n("CCol",{attrs:{sm:"7"}},[n("CInput",{attrs:{label:"Fonction:",placeholder:"fonction"},model:{value:t.postData.fonction,callback:function(e){t.$set(t.postData,"fonction",e)},expression:"postData.fonction"}})],1):t._e(),t.modalType?n("CCol",{attrs:{sm:"6"}},[n("CSelect",{attrs:{label:"Société:",options:t.selectOptionFormat,placeholder:"Sélectionner la société du client",value:t.postData.idsociete},on:{"update:value":function(e){return t.$set(t.postData,"idsociete",e)}},model:{value:t.postData.idsociete,callback:function(e){t.$set(t.postData,"idsociete",e)},expression:"postData.idsociete"}})],1):t._e()],1)],1)])},b=[],_={name:"PopUpContent",props:{formValues:{},btnState:{type:Object,default:function(){return{state:!1}}},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return[]}}},components:{},data:function(){return{postData:{typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0",idsociete:""},wasValidated:null,showInputRaison:!1,eValidated:null}},mounted:function(){},watch:{formValues:{deep:!0,handler:function(t){(t.phone||t.nom||t.name)&&(this.postData=t)}}},computed:{selectOptionFormat:function(){var t=[];if(this.selectOption.length)for(var e in this.selectOption)t.push({label:this.selectOption[e].nom,value:this.selectOption[e].idsociete});return t},checkForSave:function(){return this.modalType?1==this.wasValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1):1==this.wasValidated&&1==this.eValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1)}},methods:{setBtnState:function(t){this.btnState.state=t},inputValidation:function(t){return t.length<=4?(this.wasValidated=!1,!1):(this.wasValidated=!0,!0)},emailValidation:function(t){var e=function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())};return e(t)?(this.eValidated=!0,!0):(this.eValidated=!1,!1)},EditProject:function(){var t=this;r["a"].formatClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&t.$emit("edition-ok",e),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}))},PostNewClient:function(){var t=this;this.modalType?r["a"].formatDataClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-client")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNewClient error",t)}))})):r["a"].formatDataSte(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-ste")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNew sté error",t)}))}))}}},C=_,y=Object(u["a"])(C,g,b,!1,null,"67ba1f3a",null),w=y.exports,D={name:"SHome",props:{plusColor:{type:String,default:"info"},modalTitle:{type:String,default:"Nouveau client"},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return{}}}},components:{PopUpClient:w},data:function(){return{modalAdd:!1,btnStateAdd:{state:!1},dataToEdit:{}}},methods:{loadStes:function(){this.$refs.pop.LoadSte(),console.log("log")},modalAddOn:function(t){this.modalAdd=!0,this.dataToEdit=t},EditeEntities:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.EditProject())},PostNewClient:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.PostNewClient())},loadListClient:function(){this.$emit("load-list-client")},loadListSte:function(){this.$emit("load-list-ste")}}},j=D,O=Object(u["a"])(j,h,v,!1,null,null,null),S=O.exports,P={name:"SHome",components:{AddNew:S,ClientList:f},data:function(){return{itemsClient:[],itemsSte:[],client:"gestion_project_client",ste:"gestion_project_societe",cisloading:!1,sisloading:!1,dataToEdit:{},selectOption:[],fieldsClient:[{key:"nom",_style:"min-width:200px; ",filter:!1},{key:"adresse",_style:"min-width:200px;"},{key:"phone",_style:"min-width:200px;"},{key:"fonction",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}],fieldsSte:[{key:"nom",_style:"min-width:200px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"email",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}]}},mounted:function(){this.LoadClient(),this.LoadSte(),this.LoadStePopUp()},methods:{LoadStePopUp:function(){var t=this;this.sisloading=!0,m["a"].selectClient("gestion_project_societe").then((function(e){t.selectOption=e,t.sisloading=!1}))},DataToEditSte:function(t){this.dataToEdit=t,this.$refs.addSte.modalAddOn(t)},DataToEdit:function(t){this.dataToEdit=t,this.$refs.addClient.modalAddOn(t)},LoadClient:function(){var t=this;this.cisloading=!0,m["a"].selectClients([]).then((function(e){t.itemsClient=e,t.cisloading=!1}))},LoadSte:function(){var t=this;this.sisloading=!0,m["a"].selectSte([]).then((function(e){t.itemsSte=e,t.sisloading=!1,t.LoadStePopUp(),t.LoadClient()}))}}},x=P,k=Object(u["a"])(x,o,i,!1,null,null,null);e["default"]=k.exports},b8a6:function(t,e,n){"use strict";var o=n("bc3a"),i=n.n(o),a=n("bfb1");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e["a"]=r(r({},a["a"]),{},{TestDomain:"http://gestiontaches.kksa",baseUrl:"http://gestion-taches-vps.habeuk.com",ModeDebug:!0,postOld:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(o){var a={headers:{}};i.a.post(e.baseUrl+t,n,a).then((function(t){o({status:!0,data:t.data,reponse:t})})).catch((function(t){o({status:!1,error:t.response})}))}))},getOld:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(o){var a={headers:{}};i.a.get(e.baseUrl+t,n,a).then((function(t){console.log("Config get success : ",t),o({status:!0,data:t.data,reponse:t})})).catch((function(t){o({status:!1,error:t.response})}))}))},color:function(t,e){var n,o=0;return e>0&&t>0&&(o=100*t/e),n=o<=25?"success":o>25&&o<=50?"info":o>50&&o<=85?"secondary":o>85&&o<=100?"warning":"danger",n}})},d111:function(t,e,n){"use strict";var o=n("c1df"),i=n.n(o);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={formatData:function(t){return new Promise((function(e){console.log("fdate : ",t);var n=[];if(t&&t.titre){var o=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),a=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix(),s={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"update"};if(t.idcontents&&(s.where=[{column:"idcontents",value:t.idcontents}]),t.date_depart_proposer.length&&t.date_fin_proposer.length){var r={table:"gestion_project_times",fields:{status:t.status,date_depart_proposer:o,date_fin_proposer:a},action:"update",where:[{column:"idcontents",value:t.idcontents}]};1!==parseInt(t.status)||t.date_fin_reel&&""!==t.date_fin_reel||(r.fields.date_fin_reel=i()().unix()),n.push(r)}n.push(s),console.log("ligne",n)}e(n)}))},formatHierarchie:function(t,e){return new Promise((function(n){console.log("fdate : ",e);var o=[];if(t&&t.titre){var i={table:"gestion_project_hierachie",fields:{idcontentsparent:e.id,idcontents:t.idcontents,ordre:e.ordre},action:"update",where:[{column:"idcontents",value:t.idcontents}]};o.push(i),console.log("ligne",o)}n(o)}))},formCard:function(t){var e=[];for(var n in t){var o=t[n];o.cards&&(o.cards=this.formCard(o.cards)),e.push(s(s({},o),{},{open:!1}))}return e},formatAddData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(o){var a=[],s=parseInt(t.status,10);if(n=parseInt(n,10),t.date_depart_proposer.length&&t.date_fin_proposer){var r=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),l=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix();a.push({table:"gestion_project_times",fields:{date_depart_proposer:r,date_fin_proposer:l,status:s}})}a.push({table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0,level:n}});var c=[];if(t&&t.titre){var d={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"insert"};d.childstable={colum_id_name:"idcontents",tables:a},c.push(d)}o(c)}))},fomatVal:function(t,e){return new Promise((function(n){for(var o in t.idcontents&&(e.idcontents=t.idcontents),e)t[o]&&("date_depart_proposer"===o?(e[o]=i.a.unix(t[o]).format("YYYY-MM-DD"),e.heure_debut=i.a.unix(t[o]).format("HH:mm")):"date_fin_proposer"===o?(e[o]=i.a.unix(t[o]).format("YYYY-MM-DD"),e.heure_fin=i.a.unix(t[o]).format("HH:mm")):e[o]="privaty"===o?"0"==t[o]?0:1:t[o]);n()}))},formatDeleteData:function(t){return new Promise((function(e){var n=[];if(t&&t.titre){var o={table:"gestion_project_contents",fields:{},action:"delete"};t.idcontents&&(o.where=[{column:"idcontents",value:t.idcontents}]),o.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]}]},n.push(o),console.log("ligne",n)}e(n)}))},formatDataClient:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var o={table:"gestion_project_client",fields:{nom:t.nom,uid:t.uid,prenom:t.prenom,phone:t.phone,adresse:t.adresse,fonction:t.fonction,idsociete:t.idsociete},action:"update"};t.idclient&&(o.where=[{column:"idclient",value:t.idclient}]),n.push(o)}e(n)}))},formatDataSte:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var o={table:"gestion_project_societe",fields:{nom:t.nom,email:t.email,phone:t.phone,adresse:t.adresse,siteweb:t.siteweb},action:"update"};t.idsociete&&(o.where=[{column:"idsociete",value:t.idsociete}]),n.push(o)}e(n)}))},formatDeleteClient:function(t){return new Promise((function(e){var n=[];if(t.idclient){var o={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:t.idclient}]};n.push(o),console.log("ligne 1",n)}else if(t.idsociete){o={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};var i={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};n.push(o),n.push(i),console.log("ligne2",n)}e(n)}))},formatAddInvoice:function(t,e){return new Promise((function(n){var o=[],a=i()().unix(),s=i()().unix();if(console.log("fadin :",t),t&&t.numero){var r={table:"gestion_project_invoice",fields:{numero:t.numero,idcontents:""!==t.idcontents?t.idcontents:null,idclients:t.idclients,objet:t.objet,creaated:a,proprietaire:t.proprietaire,updated:s}};1==e&&(r.where=[{column:"numero",value:t.numero}],r.action="update"),o.push(r)}n(o)}))},formatDeleteInvoice:function(t){return new Promise((function(e){var n=[];if(t&&t.numero){var o={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:t.numero}]},i={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:t.numero}]};n.push(i),n.push(o)}e(n)}))},formatAddInvoiceList:function(t,e){return new Promise((function(n){var o=[];if(t&&t.titre){var i={table:"gestion_project_invoice_list",fields:{titre:t.titre,idcontents:""!==t.idcontents?t.idcontents:null,description:t.description,cout:t.cout,idinvoice:t.idinvoice}};1==e&&(i.where=[{column:"idinvoicelist",value:t.idinvoicelist}],i.action="update"),o.push(i)}n(o)}))},formatDeleteInvoiceList:function(t){return new Promise((function(e){var n=[];if(console.log("fadin :",t),t&&t.idinvoicelist){var o={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:t.idinvoicelist}]};n.push(o)}e(n)}))}};e["a"]=l},f0ae:function(t,e,n){"use strict";var o=n("b8a6");e["a"]={selectDatas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"c.type",operator:"=",value:"project"}];return new Promise((function(e){var n="";if(t.length)for(var i in t)n+=t[i].column+" "+t[i].operator+" '"+t[i].value+"' ";n+=" ORDER BY  c.`idcontents` DESC",n+=" limit 0,50 ",o["a"].post("/gestion-project/select/selectdatas",n).then((function(t){t.status?e(t.data):e([])}))}))},selectTypes:function(){return new Promise((function(t){o["a"].get("/gestion-project/select/project-type").then((function(e){e.status?t(e.data):t([])}))}))},selectProject:function(t){return new Promise((function(e){var n="";if(t.length)for(var i in t)n+=t[i].column+" "+t[i].operator+" '"+t[i].value+"' ";o["a"].post("/gestion-project/select/select-project",n).then((function(t){t.status?e(t.data):e([])}))}))},selectFatureList:function(t){var e=this;return new Promise((function(n){var i="";if(i+=" select * ",i+=" from ",i+=e.formatStringTable("gestion_project_invoice_list"),t.length)for(var a in i+=" WHERE ",t)i+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";o["a"].post("/gestion-project/select",i).then((function(t){t.status?n(t.data):n([])}))}))},selectInvoice:function(t){var e=this;return new Promise((function(n){var i="";if(i+=" select * ",i+=" from ",i+=e.formatStringTable("gestion_project_invoice"),t.length)for(var a in i+=" WHERE ",t)i+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";o["a"].post("/gestion-project/select",i).then((function(t){t.status?n(t.data):n([])}))}))},selectClients:function(t){var e=this;return new Promise((function(n){var i="";if(i+=" select * ",i+=" from ",i+=e.formatStringTable("gestion_project_client"),t.length)for(var a in i+=" WHERE ",t)i+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";i+=" limit 0,50 ",o["a"].post("/gestion-project/select",i).then((function(t){t.status?n(t.data):n([])}))}))},selectSte:function(t){var e=this;return new Promise((function(n){var i="";if(i+=" select * ",i+=" from ",i+=e.formatStringTable("gestion_project_societe"),t.length)for(var a in i+=" WHERE ",t)i+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";i+=" limit 0,50 ",o["a"].post("/gestion-project/select",i).then((function(t){t.status?n(t.data):n([])}))}))},selectClient:function(t){var e=this;return new Promise((function(n){var i="";i+=" select * ",i+=" from ",i+=e.formatStringTable(t),i+=" limit 0,50 ",o["a"].post("/gestion-project/select",i).then((function(t){t.status?n(t.data):n([])}))}))},selectAll:function(){return new Promise((function(t){var e="";e+=" c.idcontents is not NULL order by c.update_at DESC limit 0,30 ",o["a"].post("/gestion-project/select/select-project",e).then((function(e){e.status?t(e.data):t([])}))}))},SelectTacheEnours:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"t.status",operator:"=",value:2}];return new Promise((function(e){var n="";if(t.length)for(var i in t)n+=t[i].column+" "+t[i].operator+" '"+t[i].value+"' ";n+=" ORDER BY  c.`idcontents` DESC ",n+=" limit 0,20 ",o["a"].post("/gestion-project/select/select-tache-enours",n).then((function(t){t.status?e(t.data):e([])}))}))},formatStringTable:function(t){return"{"+t+"}"}}}}]);
//# sourceMappingURL=gestionTache.umd.min.12.js.map