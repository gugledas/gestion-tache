{"version":3,"sources":["webpack://gestionTache/./src/Steph/Header/NoteAdmin.vue?e9d1","webpack://gestionTache/src/Steph/Header/NoteAdmin.vue","webpack://gestionTache/./src/Steph/Header/NoteAdmin.vue?57f3","webpack://gestionTache/./src/Steph/Header/NoteAdmin.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","modalStatus","on","$event","staticClass","itemsTache","tableFields","isLoading","scopedSlots","_u","key","fn","ref","item","staticStyle","path","idcontents","evModalLast","_v","_s","titre","privaty","_e","created_at","progressItem","val","max","status","color","slot","directives","name","rawName","value","expression","LoadTacheData","staticRenderFns","props","modalLast","type","Boolean","required","default","components","data","current_user","progress","currentTime","mounted","config","timing","watch","deep","handler","computed","realItemsTache","real","utilisateur","$store","state","get","set","console","log","$emit","methods","dataLoad","setInterval","date_fin_proposer","date_depart_proposer","exact","date_fin_reel","diff","component"],"mappings":"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","file":"gestionTache.umd.min.15.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CModal',{attrs:{\"title\":\"Note administrative\",\"size\":\"lg\",\"color\":\"danger\",\"show\":_vm.modalStatus},on:{\"update:show\":function($event){_vm.modalStatus=$event}}},[_c('CDataTable',{staticClass:\"my-2 table-borderless\",attrs:{\"hover\":\"\",\"responsive\":false,\"items\":_vm.itemsTache,\"fields\":_vm.tableFields,\"header\":false,\"loading\":_vm.isLoading,\"items-per-page\":10,\"pagination\":\"\"},scopedSlots:_vm._u([{key:\"user\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{staticStyle:{\"min-width\":\"10rem\"}},[_c('CLink',{staticClass:\"text-decoration-none \",attrs:{\"to\":{\n            path: '/projets/' + item.idcontents,\n          }}},[_c('div',{on:{\"click\":_vm.evModalLast}},[_vm._v(\" \"+_vm._s(item.titre)+\" \"),(item.privaty == '1')?_c('CBadge',{attrs:{\"color\":\"danger\",\"position\":\"top-start\",\"shape\":\"pill\"}},[_vm._v(\" Privé \")]):_vm._e()],1),_c('div',{staticClass:\"small text-muted mt-1\"},[_vm._v(\" Crée le: \"+_vm._s(item.created_at)+\" \")])])],1)}},{key:\"usage\",fn:function(ref){\n          var item = ref.item;\nreturn _c('td',{attrs:{\"width\":\"300\"}},[_vm._v(\" \"+_vm._s(_vm.progressItem(item))+\" \"),(item.val && item.max)?_c('CProgress',{staticClass:\"progress-xs\",staticStyle:{\"height\":\"10px\"},attrs:{\"animated\":item.status === '1' || item.status === '3' ? false : true,\"showPercentage\":\"\",\"striped\":item.status === '1' || item.status === '3' ? false : true,\"max\":item.max,\"value\":item.val,\"color\":_vm.color(item.val, item.max)}}):_vm._e()],1)}},{key:\"activity\",fn:function(ref){\n          var item = ref.item;\nreturn _c('td',{},[_c('CRow',{staticClass:\"ml-0 d-flex justify-content-arround flex-nowrap\"},[_c('CLink',{staticClass:\"mx-3 text-decoration-none\",attrs:{\"color\":\"primary\",\"variant\":\"ghost\",\"shape\":\"pill\",\"size\":\"sm\",\"to\":{\n            path: '/projets/' + item.idcontents,\n          }}},[_c('div',{staticClass:\"small text-muted mt-1\"},[_vm._v(\" Crée le: \"+_vm._s(item.created_at)+\" \")])])],1)],1)}}])}),_c('CRow',[_c('CCol',{staticClass:\" pl-4 mb-n4\",attrs:{\"col\":\"10\"}},[_c('p',[_vm._v(\"Voir toutes les \"),_c('span',{on:{\"click\":_vm.evModalLast}},[_c('CLink',{staticClass:\"text-danger\",attrs:{\"to\":{\n            path: '/projets/988',\n          }}},[_vm._v(\"notes administrative \"),_c('CIcon',{staticClass:\" mx-1\",attrs:{\"name\":\"cilShare\",\"size\":\"sm\"}})],1)],1)])])],1),_c('template',{slot:\"footer\"},[_c('div',{staticClass:\"d-flex justify-content-end mr-3\"},[_c('CLink',{directives:[{name:\"c-tooltip\",rawName:\"v-c-tooltip\",value:('Actualiser'),expression:\"'Actualiser'\"}]},[_c('CButton',{attrs:{\"size\":\"sm\",\"shape\":\"pill\",\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.LoadTacheData(false)}}},[_c('CIcon',{attrs:{\"name\":\"cil-reload\",\"size\":\"sm\"}})],1)],1)],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <CModal\n    title=\"Note administrative\"\n    size=\"lg\"\n    color=\"danger\"\n    :show.sync=\"modalStatus\"\n  >\n  \n<!-- rela: <pre>{{realItemsTache}}</pre> -->\n    <CDataTable\n      class=\"my-2 table-borderless\"\n      hover\n      :responsive=\"false\"\n      :items=\"itemsTache\"\n      :fields=\"tableFields\"\n      :header=\"false\"\n      :loading=\"isLoading\"\n      \n      \n    \n      :items-per-page=\"10\"\n      pagination\n    >\n      <td slot=\"user\" slot-scope=\"{ item }\" style=\"min-width:10rem;\">\n        <CLink\n          :to=\"{\n            path: '/projets/' + item.idcontents,\n          }\"\n          class=\"text-decoration-none \"\n        >\n          <div @click=\"evModalLast\">\n            {{ item.titre }}\n            <CBadge\n              v-if=\"item.privaty == '1'\"\n              color=\"danger\"\n              position=\"top-start\"\n              shape=\"pill\"\n            >\n              Privé\n            </CBadge>\n          </div>\n          <div class=\"small text-muted mt-1\">\n            Crée le: {{ item.created_at }}\n          </div>\n        </CLink>\n      </td>\n      <!-- \n          <td slot=\"country\" slot-scope=\"{ item }\" class=\"text-center\">\n          <CIcon :name=\"item.country.flag\" height=\"25\" />\n        </td> \n      -->\n      <td slot=\"usage\" slot-scope=\"{ item }\" width=\"300\">\n        {{ progressItem(item) }}\n        <CProgress\n          class=\"progress-xs\"\n          :animated=\"item.status === '1' || item.status === '3' ? false : true\"\n          showPercentage\n          :striped=\"item.status === '1' || item.status === '3' ? false : true\"\n          style=\"height: 10px\"\n          :max=\"item.max\"\n          :value=\"item.val\"\n          :color=\"color(item.val, item.max)\"\n          v-if=\"item.val && item.max\"\n        />\n      </td>\n\n      <td slot=\"activity\" slot-scope=\"{ item }\">\n        <CRow class=\"ml-0 d-flex justify-content-arround flex-nowrap\">\n          <CLink\n            color=\"primary\"\n            variant=\"ghost\"\n            shape=\"pill\"\n            size=\"sm\"\n            class=\"mx-3 text-decoration-none\"\n             :to=\"{\n            path: '/projets/' + item.idcontents,\n          }\"\n         \n          >\n            <div class=\"small text-muted mt-1\">\n            Crée le: {{ item.created_at }}\n          </div>\n          </CLink>\n        </CRow>\n      </td>\n    </CDataTable>\n      <CRow>\n      <CCol col=\"10\" class=\" pl-4 mb-n4\">\n      <p>Voir toutes les \n        <span @click=\"evModalLast\">\n          <CLink  class=\"text-danger\" :to=\"{\n            path: '/projets/988',\n          }\">notes administrative <CIcon name=\"cilShare\" class=\" mx-1\" size=\"sm\" ></CIcon></CLink>\n        </span></p> \n      </CCol>\n    </CRow>\n    <template slot=\"footer\">\n      <div class=\"d-flex justify-content-end mr-3\">\n        <CLink v-c-tooltip=\"'Actualiser'\"\n          ><CButton\n            size=\"sm\"\n            shape=\"pill\"\n            color=\"secondary\"\n            @click=\"LoadTacheData(false)\"\n          >\n            <CIcon name=\"cil-reload\" size=\"sm\" /> </CButton\n        ></CLink>\n      </div>\n    </template>\n  </CModal>\n</template>\n\n<script>\nimport SelectDb from \"../../views/App/config/SelectDb\";\nimport config from \"../../views/App/config/config\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"noteAdmin\",\n  props: {\n \n    modalLast: {\n      type: Boolean,\n      required: true,\n      default: false,\n    },\n  },\n  components: {\n    //\n  },\n  data() {\n    return {\n      current_user: \"\",\n      isLoading: false,\n      itemsTache: [],\n      tableFields: [\n        { key: \"user\", _style: \"min-width:550px;\", filter: false },\n         { key: \"usage\", _style: \"min-width:200px;\" },\n        // { key: \"activity\", _style: \"width:800px;\" },\n      ],\n      progress: {\n        max: 0,\n        val: 0,\n      },\n      currentTime: moment().unix(),\n    };\n  },\n  mounted() {\n    this.current_user = config.current_user.toString();\n\n    this.LoadTacheData();\n    this.timing();\n  },\n  watch: {\n    itemsTache: {\n      deep: true,\n      handler (val) {\n      console.log('vallwatch',val)\n      if(val.length) {\n        this.$emit('hide-note')\n      }\n    }}\n    //\n  },\n  computed: {\n    realItemsTache() {\n     let real =  this.itemsTache.filter(el=> el.status != '0' && el.status != '2')\n      return real\n    },\n    utilisateur() {\n      return this.$store.state.utilisateur;\n    },\n\n    modalStatus: {\n      get() {\n        return this.modalLast;\n      },\n      set(val) {\n        console.log('val',this.modalLast)\n        this.$emit(\"update-modal\", val);\n      },\n    },\n  },\n  methods: {\n    LoadTacheData() {\n          this.isLoading = true;\n       \n            SelectDb.SelectNotesAd(this.current_user)\n              .then((response) => {\n                this.itemsTache = response;\n                this.isLoading = false;\n              })\n              .catch((er) => {\n                console.log(\"error chargement notes administrative:\", er);\n                this.isLoading = false;\n              });\n            \n    },\n    timing() {\n      if (this.dataLoad && this.dataLoad.status == 2) {\n        this.currentTime = moment().unix();\n        setInterval(() => {\n          this.currentTime = moment().unix();\n        }, 5000);\n      } else {\n        this.currentTime = moment().unix();\n      }\n    },\n    evModalLast() {\n      this.$emit(\"ev_modal_last\");\n    },\n    progressItem(item) {\n      \n      var date_fin_proposer = moment.unix(item.date_fin_proposer);\n      var date_depart_proposer = moment.unix(item.date_depart_proposer);\n      var exact = moment.unix(this.currentTime);\n      if (item && item.date_fin_reel && item.date_fin_reel > 0) {\n        \n        exact = moment.unix(item.date_fin_reel);\n      }\n      var val = exact.diff(date_depart_proposer, \"minutes\");\n      var max = date_fin_proposer.diff(date_depart_proposer, \"minutes\");\n      item.max = max;\n      item.val = val;\n    },\n    color(valueCurent, maxValue) {\n      return config.color(valueCurent, maxValue);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n\n<!--\n //nom du fichier en pascal.\n //<template>\n - le nom des attributs en kebab-case;\n - la valeur des attributs et des variables en camelCase;\n - function en PascalCase\n //props, data\n - variable en camelCase\n //methods\n - variable en PascalCase\n-->\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoteAdmin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoteAdmin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NoteAdmin.vue?vue&type=template&id=af1a162a&scoped=true&\"\nimport script from \"./NoteAdmin.vue?vue&type=script&lang=js&\"\nexport * from \"./NoteAdmin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af1a162a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}