(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[15],{"13d7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CModal",{attrs:{title:"Note administrative",size:"lg",color:"danger",show:t.modalStatus},on:{"update:show":function(e){t.modalStatus=e}}},[a("CDataTable",{staticClass:"my-2 table-borderless",attrs:{hover:"",responsive:!1,items:t.itemsTache,fields:t.tableFields,header:!1,loading:t.isLoading,"items-per-page":10,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var s=e.item;return a("td",{staticStyle:{"min-width":"10rem"}},[a("CLink",{staticClass:"text-decoration-none ",attrs:{to:{path:"/projets/"+s.idcontents}}},[a("div",{on:{click:t.evModalLast}},[t._v(" "+t._s(s.titre)+" "),"1"==s.privaty?a("CBadge",{attrs:{color:"danger",position:"top-start",shape:"pill"}},[t._v(" Privé ")]):t._e()],1),a("div",{staticClass:"small text-muted mt-1"},[t._v(" Crée le: "+t._s(s.created_at)+" ")])])],1)}},{key:"usage",fn:function(e){var s=e.item;return a("td",{attrs:{width:"300"}},[t._v(" "+t._s(t.progressItem(s))+" "),s.val&&s.max?a("CProgress",{staticClass:"progress-xs",staticStyle:{height:"10px"},attrs:{animated:"1"!==s.status&&"3"!==s.status,showPercentage:"",striped:"1"!==s.status&&"3"!==s.status,max:s.max,value:s.val,color:t.color(s.val,s.max)}}):t._e()],1)}},{key:"activity",fn:function(e){var s=e.item;return a("td",{},[a("CRow",{staticClass:"ml-0 d-flex justify-content-arround flex-nowrap"},[a("CLink",{staticClass:"mx-3 text-decoration-none",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm",to:{path:"/projets/"+s.idcontents}}},[a("div",{staticClass:"small text-muted mt-1"},[t._v(" Crée le: "+t._s(s.created_at)+" ")])])],1)],1)}}])}),a("CRow",[a("CCol",{staticClass:" pl-4 mb-n4",attrs:{col:"10"}},[a("p",[t._v("Voir toutes les "),a("span",{on:{click:t.evModalLast}},[a("CLink",{staticClass:"text-danger",attrs:{to:{path:"/projets/988"}}},[t._v("notes administrative "),a("CIcon",{staticClass:" mx-1",attrs:{name:"cilShare",size:"sm"}})],1)],1)])])],1),a("template",{slot:"footer"},[a("div",{staticClass:"d-flex justify-content-end mr-3"},[a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Actualiser",expression:"'Actualiser'"}]},[a("CButton",{attrs:{size:"sm",shape:"pill",color:"secondary"},on:{click:function(e){return t.LoadTacheData(!1)}}},[a("CIcon",{attrs:{name:"cil-reload",size:"sm"}})],1)],1)],1)])],2)},i=[],n=a("f0ae"),r=a("b8a6"),o=a("c1df"),l=a.n(o),c={name:"noteAdmin",props:{modalLast:{type:Boolean,required:!0,default:!1}},components:{},data:function(){return{current_user:"",isLoading:!1,itemsTache:[],tableFields:[{key:"user",_style:"min-width:550px;",filter:!1},{key:"usage",_style:"min-width:200px;"}],progress:{max:0,val:0},currentTime:l()().unix()}},mounted:function(){this.current_user=r["a"].current_user.toString(),this.LoadTacheData(),this.timing()},watch:{itemsTache:{deep:!0,handler:function(t){console.log("vallwatch",t),t.length&&this.$emit("hide-note")}}},computed:{realItemsTache:function(){var t=this.itemsTache.filter((function(t){return"0"!=t.status&&"2"!=t.status}));return t},utilisateur:function(){return this.$store.state.utilisateur},modalStatus:{get:function(){return this.modalLast},set:function(t){console.log("val",this.modalLast),this.$emit("update-modal",t)}}},methods:{LoadTacheData:function(){var t=this;this.isLoading=!0,n["a"].SelectNotesAd(this.current_user).then((function(e){t.itemsTache=e,t.isLoading=!1})).catch((function(e){console.log("error chargement notes administrative:",e),t.isLoading=!1}))},timing:function(){var t=this;this.dataLoad&&2==this.dataLoad.status?(this.currentTime=l()().unix(),setInterval((function(){t.currentTime=l()().unix()}),5e3)):this.currentTime=l()().unix()},evModalLast:function(){this.$emit("ev_modal_last")},progressItem:function(t){var e=l.a.unix(t.date_fin_proposer),a=l.a.unix(t.date_depart_proposer),s=l.a.unix(this.currentTime);t&&t.date_fin_reel&&t.date_fin_reel>0&&(s=l.a.unix(t.date_fin_reel));var i=s.diff(a,"minutes"),n=e.diff(a,"minutes");t.max=n,t.val=i},color:function(t,e){return r["a"].color(t,e)}}},u=c,d=a("2877"),m=Object(d["a"])(u,s,i,!1,null,"af1a162a",null);e["default"]=m.exports}}]);
//# sourceMappingURL=gestionTache.umd.min.15.js.map