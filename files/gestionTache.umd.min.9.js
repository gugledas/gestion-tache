(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[9],{1267:function(t,e,a){},5724:function(t,e,a){"use strict";a("1267")},"618c":function(t,e,a){"use strict";a.r(e);var o,n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("CCard",[a("CCardHeader",{class:"card-progress card-color card-border card-border--"+t.dataLoad.type},[a("CLink",{staticClass:"text-dark text-decoration-none",attrs:{to:"/projets/"+t.dataLoad.idcontents}},[t._v(t._s(t.dataLoad.titre)+" ")]),a("div",{staticClass:"px-2 date-created"},[a("small",[t._v(t._s(t.createdAt))])]),t.dataLoad.type.length>1&&"memos"!==t.dataLoad.type?a("CProgress",{staticClass:"progress-xs card-prog",staticStyle:{height:"10px"},attrs:{animated:"1"!==t.dataLoad.status,showPercentage:"",striped:"1"!==t.dataLoad.status,max:t.progress.max,value:t.progress.val,color:t.color(t.progress.val,t.progress.max)}}):t._e(),a("div",{staticClass:"card-header-actions"},[a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Afficher/Cacher la description",expression:"'Afficher/Cacher la description'"}],staticClass:" btn-close m-2",attrs:{href:"#"},on:{click:function(e){t.descToggle=!t.descToggle}}},[a("CIcon",{attrs:{name:"cil-chevron-circle-"+(t.descToggle?"down":"up")+"-alt"}})],1),a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Edité le contenu",expression:"'Edité le contenu'"}],staticClass:" btn-close m-2",attrs:{href:"#"},on:{click:t.modalEditOn}},[a("CIcon",{attrs:{name:"cil-pencil"}})],1),a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Modifier le parent",expression:"'Modifier le parent'"}],staticClass:" btn-close m-2",attrs:{href:"#"},on:{click:t.changeParent}},[a("CIcon",{attrs:{name:"cil-cursor-move"}})],1),a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Créer un sous contenu",expression:"'Créer un sous contenu'"}],staticClass:" btn-close m-1",attrs:{href:"#"},on:{click:t.HideTypeProject}},[a("CIcon",{attrs:{name:"cil-plus"}})],1),a("CLink",{staticClass:"m-2 btn-setting",attrs:{href:"#"},on:{click:t.modalRessourceOn}},[a("CIcon",{attrs:{name:"cil-settings"}})],1),a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Afficher/Cacher les sous projects",expression:"'Afficher/Cacher les sous projects'"}],staticClass:"m-1 btn-minimize",on:{click:t.Collapsed}},[a("CIcon",{attrs:{name:"cil-chevron-"+(t.dataLoad.open?"bottom":"top")}})],1),a("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Supprimer ce contenu",expression:"'Supprimer ce contenu'"}],staticClass:"m-2 btn-close text-danger",attrs:{href:"#"},on:{click:t.DeleteModalOn}},[a("CIcon",{attrs:{color:"danger",name:"cil-x-circle"}})],1)],1)],1),a("CCollapse",{attrs:{show:t.dataLoad.open,duration:400}},[a("CCardBody",[a("CCollapse",{attrs:{show:t.descToggle,duration:400}},[a("div",{domProps:{innerHTML:t._s(t.textDisplay)}})]),t._t("default")],2)],1)],1),a("CModal",{attrs:{title:"Confirmer la suppression",color:"danger",show:t.deleteModal},on:{"update:show":function(e){t.deleteModal=e}}},[t._v(" êtes vous sûre de vouloir supprimer ce contenu? "),a("br"),a("small",{staticClass:"mt-2 text-center"},[t._v("Cette action est irréversible.")]),a("template",{slot:"footer"},[a("div",{staticClass:"d-flex justify-content-end mr-3"},[a("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.deleteModal=!1}}},[t._v("Cancel")]),a("CButton",{staticClass:"mx-1",attrs:{color:"danger",desabled:""},on:{click:t.DeleteContent}},[t._v("Supprimer")])],1)])],2),a("CModal",{attrs:{title:"Modification de la hiérarchie",color:"dark",show:t.hierarchiModal},on:{"update:show":function(e){t.hierarchiModal=e}}},[a("CRow",[a("CCol",{staticClass:"mr-0 pr-0",attrs:{col:"8",sm:"5"}},[a("CInput",{attrs:{label:"Ordre:",type:"number",horizontal:""},model:{value:t.newIdParrent.ordre,callback:function(e){t.$set(t.newIdParrent,"ordre",e)},expression:"newIdParrent.ordre"}})],1),a("CCol",{attrs:{md:"10"}},[a("SSearch",{on:{"parent-selected":t.parentSelected}}),a("small",[t._v("Choisir le nouveau parent")]),t._v(" "),a("br"),a("small",[t._v("Parent Actuel: "),a("strong",[t._v(t._s(t.dataLoad.idcontentsparent))])])],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"d-flex justify-content-end mr-3"},[a("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.hierarchiModal=!1}}},[t._v("Cancel")]),a("CButton",{staticClass:"mx-1",attrs:{color:"dark",desabled:""},on:{click:t.ChangeHierarchie}},[t._v("Enregistrer "),t.spinner?a("CSpinner",{staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"primary"}}):t._e()],1)],1)])],2)],1)},s=[],r=a("c71b"),c=a("d111"),l=a("b8a6"),d=a("1487"),u=a.n(d),p=a("c1df"),h=a.n(p),m={name:"CardComponent",props:{dataLoad:{type:Object,required:!0,default:function(){return{}}},isCollapsed:{type:Object,default:function(){return{status:!1}}}},components:{SSearch:r["a"]},data:function(){return{btnStateEdit:{state:!1},modalEdit:!1,deleteModal:!1,hierarchiModal:!1,ressourceToAdd:"",chooseType:"text",descToggle:!0,currentTime:"",show:!0,max:"",spinner:!1,selected:"projet",addingModal:!1,modalRessource:!1,newIdParrent:{id:"",ordre:""},editorData:"<p>me al rasp sale</p>",editorConfig:{extraPlugins:"codesnippet",codeSnippet_theme:"monokai_sublime"},options:[{value:"projet",label:"Projet"},{value:"tache",label:"Tâche"},{value:"memos",label:"Mémos"}]}},mounted:function(){this.timing()},computed:{progress:function(){var t={},e=h.a.unix(this.dataLoad.date_fin_proposer),a=h.a.unix(this.dataLoad.date_depart_proposer),o=h.a.unix(this.currentTime);this.dataLoad.date_fin_reel>0&&(o=h.a.unix(this.dataLoad.date_fin_reel));var n=o.diff(a,"minutes"),i=e.diff(a,"minutes");return t.max=i,t.val=n,t},textDisplay:function(){var t=document.createElement("div");return t.innerHTML=this.dataLoad.text?this.dataLoad.text:"",t.querySelectorAll("pre code").forEach((function(t){u.a.highlightBlock(t)})),t.outerHTML},createdAt:function(){return h()(this.dataLoad.created_at,"YYYY-MM-DD HH:mm").format("DD/MM/YYYY HH:mm")}},methods:{timing:function(){var t=this;2==this.dataLoad.status?(this.currentTime=h()().unix(),setInterval((function(){t.currentTime=h()().unix()}),5e3)):this.currentTime=h()().unix()},color:function(t,e){var a,o=0;return e>0&&t>0&&(o=100*t/e),a=o<=25?"success":o>25&&o<=50?"info":o>50&&o<=85?"secondary":o>85&&o<=100?"warning":"danger",a},parentSelected:function(t){this.newIdParrent.id=t.idcontents},ChangeHierarchie:function(){var t=this;this.spinner=!0,c["a"].formatHierarchie(this.dataLoad,this.newIdParrent).then((function(e){l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&(console.log("data after edit :",e),t.$emit("edition-ok",e)),t.spinner=!1,t.hierarchiModal=!1})).catch((function(t){console.log("error",t)}))}))},changeParent:function(){console.log("changeparent",this.dataLoad),this.$emit("change-parent",this.dataLoad),this.newIdParrent.ordre=this.dataLoad.ordre,this.hierarchiModal=!0},DeleteModalOn:function(){this.deleteModal=!0},DeleteContent:function(){var t=this;c["a"].formatDeleteData(this.dataLoad,"delete").then((function(e){console.log(" deleteProject : ",e),l["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&(console.log("data after delete :",e),t.$emit("suppression-ok")),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}))},Collapsed:function(){this.dataLoad.open?this.dataLoad.open=!1:this.dataLoad.open=!0},HideTypeProject:function(){this.$emit("Hide-type-project",this.dataLoad)},modalEditOn:function(){this.$emit("modal-edit-on",this.dataLoad)},modalRessourceOn:function(){this.$emit("modal-ressource-on")},modalEditOnText:function(t){console.log("Test edit : ",t.titre),this.$emit("ev-modal-edit-on",t)}}},f=m,C=(a("6b1d"),a("2877")),v=Object(C["a"])(f,i,s,!1,null,null,null),g=v.exports,_={name:"CardsJSX",props:{dataLoad:{type:Array,required:!0}},data:function(){return{btnStateEdit:{state:!1},modalEdit:!1,ressourceToAdd:"",chooseType:"text",descToggle:!1,show:!0,selected:"projet",addingModal:!1,modalRessource:!1,editorData:"<p>me al rasp sale</p>",editorConfig:{extraPlugins:"codesnippet",codeSnippet_theme:"monokai_sublime"},options:[{value:"projet",label:"Projet"},{value:"tache",label:"Tâche"},{value:"memos",label:"Mémos"}]}},render:function(t){var e=this,a=t,o=function t(o){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return o.forEach((function(o){var s=[];o.open=n,Array.isArray(o.cards)&&(s=t(o.cards,!1)),i.push(a(g,{props:{dataLoad:o},on:{"modal-edit-on":function(t){e.$emit("modal-edit-on",t)},"Hide-type-project":function(t){e.$emit("Hide-type-project",t)},"suppression-ok":function(){e.$emit("suppression-ok")},"change-parent":function(t){e.$emit("change-parent",t)},"edition-ok":function(){e.$emit("edition-ok")}}},s))})),i};return a("div",o(this.dataLoad,!0))}},x=_,b=Object(C["a"])(x,o,n,!1,null,null,null);e["default"]=b.exports},"6b1d":function(t,e,a){"use strict";a("b8d3")},b8d3:function(t,e,a){},c71b:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.styled?"searchForm":""},[a("multiselect",{attrs:{options:t.project,placeholder:"Tapez une recherche","hide-selected":!0,"max-height":600,"option-height":20,"show-labels":!1,searchable:!0,loading:t.isLoading,"track-by":"titre","internal-search":!0,showPointer:!0,label:"titre"},on:{"search-change":t.TypingSearch},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{staticClass:"option__desc d-inline-flex flex-column"},[a("span",{staticClass:"option__title"},[t._v(t._s(e.option.titre))])])]}},{key:"option",fn:function(e){return[t.styled?a("div",{staticClass:"option__desc d-inline-flex flex-column align-items-start"},[a("span",{staticClass:"option__title mb-2"},[a("CIcon",{staticClass:"mr-1 text-info ",attrs:{name:"cilFolder"}}),t._v(" "+t._s(e.option.titre)+" ")],1),a("div",{staticClass:"d-flex aling-items-center"},[a("span",{staticClass:"text-info bg-light p-1 mt-2 h6"},[t._v(t._s(e.option.type))]),a("router-link",{attrs:{to:"/projets/"+e.option.idcontents}},[a("CButton",{staticClass:"ml-4",attrs:{variant:"ghost",color:"warning",size:"sm"}},[a("CIcon",{attrs:{name:"cilPencil"}})],1)],1)],1)]):t._e(),t.styled?t._e():a("div",{staticClass:"option__desc d-inline-flex flex-column align-items-start",on:{click:function(a){return t.ParentSelected(e)}}},[a("span",{staticClass:"option__title mb-2"},[a("CIcon",{staticClass:"mr-1 text-dark ",attrs:{name:"cilFolder"}}),t._v(" "+t._s(e.option.titre)+" "),a("small",{staticClass:"text-dark  p-1 mt-2 ml-2 text-type"},[t._v(t._s(e.option.type))])],1)])]}}]),model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)},n=[],i=a("8e5f"),s=a.n(i),r=a("8bbf"),c=a.n(r),l=a("b8a6");c.a.component("multiselect",s.a);var d={props:{styled:{type:Boolean,default:!1}},components:{Multiselect:s.a},data:function(){return{value:"",searchValue:"",options:["list","of","options"],project:[],isLoading:!1,timer:null}},mounted:function(){},watch:{},computed:{pOptions:function(){var t=[];if(this.project.length)for(var e in this.project)t.push(this.project[e].titre);return t}},methods:{ParentSelected:function(t){console.log("dataSelected :",t.option),this.$emit("parent-selected",t.option)},TypingSearch:function(t){if(t.length>=2){this.isLoading=!0,this.value=t;var e=this;clearTimeout(e.timer),e.timer=setTimeout((function(){e.LoadProjectData()}),1500)}},LoadProjectData:function(){var t=this;this.isLoading=!0,l["a"].post("/gestion-project/search?key="+this.value,{level:0}).then((function(e){e.status&&e&&(t.project=e.data,console.log("Project search load",e)),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}}},u=d,p=(a("60bc"),a("5724"),a("2877")),h=Object(p["a"])(u,o,n,!1,null,null,null);e["a"]=h.exports}}]);
//# sourceMappingURL=gestionTache.umd.min.9.js.map