(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[2],{"2a5d":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{"check-valid-form":e.checkForSave}},[o("div",[o("CRow",{staticClass:"form-group",attrs:{gutters:!1}},[o("br"),o("CCol",{attrs:{sm:"3"}},[o("p",[e._v("Choisir un type:")])]),o("CCol",{attrs:{sm:"9"}},[o("CInputRadioGroup",{attrs:{options:e.options,checked:e.postData.type,custom:"",inline:""},on:{"update:checked":function(t){return e.$set(e.postData,"type",t)}}}),e.postData.type.length<2?o("small",{staticClass:"text-danger"},[e._v(" Ce champ est requis ")]):e._e()],1)],1)],1),o("hr"),o("div",{staticClass:"pl-sm-2"},["memos"!==e.postData.type&&""===e.postData.date_fin_reel?o("CRow",{staticClass:"form-group",attrs:{gutters:!1}},[o("CCol",{attrs:{sm:"2"}},[o("p",[e._v("Statut:")])]),o("CCol",{attrs:{sm:"10"}},[o("CInputRadioGroup",{attrs:{options:e.statusOpt,checked:e.postData.status,custom:"",inline:""},on:{"update:checked":function(t){return e.$set(e.postData,"status",t)}}})],1),e.showInputRaison?o("CCol",{attrs:{sm:"8",md:"7"}},[o("CTextarea",{attrs:{label:"Raison:",type:"textarea",horizontal:"",placeholder:"writes something...",rows:"2",description:"Une description de la raison du changement de status"},model:{value:e.postData.raison,callback:function(t){e.$set(e.postData,"raison",t)},expression:"postData.raison"}})],1):e._e()],1):e._e(),"memos"!==e.postData.type?o("CRow",[o("CCol",{attrs:{col:"12",lg:"6"}},[o("CRow",{},[o("CInput",{staticClass:"col-10 col-sm-7",attrs:{label:"Debut:",type:"date",readonly:e.postData.date_fin_reel>0,horizontal:""},model:{value:e.postData.date_depart_proposer,callback:function(t){e.$set(e.postData,"date_depart_proposer",t)},expression:"postData.date_depart_proposer"}}),o("CInput",{staticClass:"col-8 ml-sm-0 pl-sm-0 col-sm-5",attrs:{readonly:e.postData.date_fin_reel>0,type:"time",horizontal:""},model:{value:e.postData.heure_debut,callback:function(t){e.$set(e.postData,"heure_debut",t)},expression:"postData.heure_debut"}})],1)],1),o("CCol",{attrs:{col:"10",lg:"6"}},[o("CRow",{},[o("CInput",{staticClass:"col-10 col-sm-7",attrs:{label:"Fin:",readonly:e.postData.date_fin_reel>0,type:"date",horizontal:""},model:{value:e.postData.date_fin_proposer,callback:function(t){e.$set(e.postData,"date_fin_proposer",t)},expression:"postData.date_fin_proposer"}}),o("CInput",{staticClass:"col-8 ml-sm-0 pl-sm-0 col-sm-5",attrs:{readonly:e.postData.date_fin_reel>0,type:"time",horizontal:""},model:{value:e.postData.heure_fin,callback:function(t){e.$set(e.postData,"heure_fin",t)},expression:"postData.heure_fin"}})],1)],1)],1):e._e(),o("CRow",[o("CCol",{attrs:{sm:"10"}},[o("div",{staticClass:"form-group "},[e._v(" Contenu privée ?: "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.postData.privaty,expression:"postData.privaty"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.postData.privaty)?e._i(e.postData.privaty,null)>-1:e.postData.privaty},on:{change:function(t){var o=e.postData.privaty,n=t.target,r=!!n.checked;if(Array.isArray(o)){var a=null,i=e._i(o,a);n.checked?i<0&&e.$set(e.postData,"privaty",o.concat([a])):i>-1&&e.$set(e.postData,"privaty",o.slice(0,i).concat(o.slice(i+1)))}else e.$set(e.postData,"privaty",r)}}})])]),o("CCol",{attrs:{sm:"7"}},[o("CInput",{attrs:{label:"Title:",placeholder:"Entrez un titre",wasValidated:e.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:e.inputValidation},model:{value:e.postData.titre,callback:function(t){e.$set(e.postData,"titre",t)},expression:"postData.titre"}})],1),"project"==e.postData.type?o("CCol",{attrs:{sm:"5"}},[o("CInput",{attrs:{label:"Nom du Client:",placeholder:"Select or add new Client"},model:{value:e.postData.clientName,callback:function(t){e.$set(e.postData,"clientName",t)},expression:"postData.clientName"}})],1):e._e()],1),o("CRow",[o("CCol",{attrs:{sm:"12"}},[o("label",[e._v("Description:")]),o("ckeditor",{attrs:{config:e.editorConfig},on:{namespaceloaded:e.onNamespaceLoaded},model:{value:e.postData.text,callback:function(t){e.$set(e.postData,"text",t)},expression:"postData.text"}})],1)],1),"project"==e.postData.type?o("CRow",[o("CCol",{attrs:{col:"8",lg:"4"}},[o("CInput",{attrs:{label:"Estimation du coût:",append:".00",description:"montant",prepend:"$"},model:{value:e.postData.price,callback:function(t){e.$set(e.postData,"price",t)},expression:"postData.price"}})],1)],1):e._e()],1)])},r=[],a=o("d111"),i=o("25ae"),s=o.n(i),c=o("1487"),l=o.n(c),u=o("b8a6"),p=o("c1df"),d=o.n(p),f=o("f9cf");function m(e,t){var o="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=h(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){g(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var D={name:"PopUpContent",props:{formValues:{type:[Object],required:!0},btnState:{type:Object,default:function(){return{state:!1}}},level:{type:Number,default:0}},components:{ckeditor:s.a.component},data:function(){return{postData:{typeIsOk:!1,type:"project",status:"0",date_depart_proposer:"",date_fin_proposer:"",date_fin_reel:"",temps_pause:"",raison:"",heure_debut:"",heure_fin:"",clientName:"",titre:"",price:"",text:"",privaty:!0},fHeure:"",dHeure:"",wasValidated:null,showInputRaison:!1,editorData:"",warningModal:!1,extraPlugins:"",preEditorConfig:{codeSnippet_theme:"monokai_sublime",stylesSet:[],contentsCss:" @import '"+u["a"].baseUrl+"/modules/custom/gestion_tache/files/gestionTache.css'; body{margin:1em !important; background: #FFF;}",on:{instanceReady:function(){this.dataProcessor.writer.setRules("p",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!0,breakAfterClose:!0}),this.dataProcessor.writer.setRules("img",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h1",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h2",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h3",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h4",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h5",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("h6",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),this.dataProcessor.writer.setRules("div",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!1})}}},options:[],statusOpt:[{value:"0",label:"New"},{value:"2",label:"Encours"},{value:"1",label:"Terminé"},{value:"3",label:"Annulé"}]}},mounted:function(){var e=this;f["a"].loadType().then((function(t){e.options=t}))},watch:{formValues:{deep:!0,handler:function(e){a["a"].fomatVal(e,this.postData).then((function(){}))}}},computed:{dureeProjet:function(){var e;return this.formValues.date_depart_proposer&&this.formValues.date_fin_proposer&&(e=this.formValues.date_fin_proposer-this.formValues.date_depart_proposer),e},tarara:function(){var e=this.postData.date_depart_proposer+" "+this.dHeure,t=d()(e,"YYYY-MM-DD HH:mm").unix(),o=d.a.unix(t).format("HH:mm"),n=[];return n.push(t),n.push(o),n},checkForSave:function(){return 1==this.wasValidated&&this.postData.type.length>2?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1)},ser:function(){var e=document.createElement("div");return e.innerHTML=this.editorData,e.querySelectorAll("pre code").forEach((function(e){l.a.highlightBlock(e)})),e.outerHTML},editorConfig:function(){var e="codesnippet,print,format,font,colorbutton,justify,image,filebrowser,stylesheetparser";return window.location.host.includes("localhost--")?_({extraPlugins:e},this.preEditorConfig):_({extraPlugins:e+",quickuploader"},this.preEditorConfig)},optionsTache:function(){var e,t=[],o=m(this.options);try{for(o.s();!(e=o.n()).done;){var n=e.value;"project"==n.value||t.push(n)}}catch(r){o.e(r)}finally{o.f()}return t}},methods:{onNamespaceLoaded:function(e){d.a,e.plugins.addExternal("quickuploader",u["a"].baseUrl+"/libraries/quickuploader/plugin.js?v="+d()().unix()),e.config.allowedContent=!0,e.config.htmlEncodeOutput=!1,e.config.entities=!1,e.config.quickuploaderUploadUrl=u["a"].baseUrl,e.dtd.$removeEmpty.span=0,e.dtd.$removeEmpty.i=0,e.dtd.$removeEmpty.label=0},setBtnState:function(e){this.btnState.state=e},inputValidation:function(e){return e.length<=4?(this.wasValidated=!1,!1):(this.wasValidated=!0,!0)},EventShowInput:function(){},TimeNow:function(){var e=d()().format("YYYY-MM-DD"),t=d()().format("HH:mm");this.postData.date_depart_proposer=e,this.postData.heure_debut=t,this.postData.date_fin_proposer=e,this.postData.heure_fin=t},changeType:function(){this.options=this.optionsTache,this.postData.type="tache"},EditProject:function(){var e=this;a["a"].formatData(this.postData,this.dHeure,this.fHeure).then((function(t){u["a"].post("/gestion-project/save-update",t).then((function(t){t.status&&e.$emit("edition-ok",t),e.isLoading=!1})).catch((function(e){console.log("error",e)}))}))},FormatTime:function(e){var t=this.postData,o=d()(t.date_depart_proposer,"YYYY-MM-DD  HH:mm").unix(),n=d()(t.date_fin_proposer,"YYYY-MM-DD  HH:mm").unix(),r=[];r.push({idcontents:e,date_depart_proposer:o,date_fin_proposer:n})},FormatData:function(e){var t=this.postData,o=d()(t.date_depart_proposer,"YYYY-MM-DD  HH:mm").unix(),n=d()(t.date_fin_proposer,"YYYY-MM-DD  HH:mm").unix(),r=parseInt(this.postData.status,10),a=[];return a.push({table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type},childstable:{colum_id_name:"idcontents",tables:[{table:"gestion_project_times",fields:{date_depart_proposer:o,date_fin_proposer:n,status:r}},{table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0}}]}}),a},PostNewProject:function(e){var t=this;a["a"].formatAddData(this.postData,e,this.level).then((function(e){console.log("created",e),u["a"].post("/gestion-project/save-update",e).then((function(e){e.status&&(t.request=e.data[0],t.$emit("addnew-ok")),t.isLoading=!1})).catch((function(e){console.log("error",e)}))}))}}},w=D,y=o("2877"),j=Object(y["a"])(w,n,r,!1,null,"494c831b",null);t["default"]=j.exports},"4bd1":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("CRow",{staticClass:"ml-2 mt-n2 d-flex",attrs:{alignVertical:"center"}},[o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Nouveau projet",expression:"'Nouveau projet'"}],attrs:{size:"sm",color:"warning",shape:"pill"},on:{click:e.modalAddOn}},[o("CIcon",{staticClass:"text-white",attrs:{name:"cilPlus",height:35,size:"xl"}})],1),e.showSideText?o("h6",{staticClass:"ml-1 mt-1"},[e._v("Nouveau projet")]):e._e()],1),o("CModal",{attrs:{size:"lg",title:"Nouveau projet",color:"warning",show:e.modalAdd,footer:!1},on:{"update:show":function(t){e.modalAdd=t}}},[o("PopUpContent",{ref:"child",attrs:{formValues:e.formValues,"btn-state":e.btnStateAdd}}),o("template",{slot:"footer"},[o("div",{staticClass:"d-flex justify-content-end mr-3"},[o("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(t){e.modalAdd=!1}}},[e._v(" Cancel ")]),o("CButton",{staticClass:"mx-1",attrs:{color:e.btnStateAdd.state?"warning":"light"},on:{click:e.PostNewProject}},[e._v(" Save ")])],1)])],2)],1)},r=[],a=o("1487"),i=o.n(a),s=o("2a5d"),c={components:{PopUpContent:s["default"]},props:{showSideText:{type:Boolean,default:null}},data:function(){return{postData:{starttime:"",endtime:"",title:"",text:""},btnStateAdd:{state:!1},editorData:"<p>content...</p>",selected:"projet",modalAdd:!1,editorConfig:{extraPlugins:"codesnippet",codeSnippet_theme:"monokai_sublime"},options:[{value:"projet",label:"Projet"},{value:"tache",label:"Tâche"},{value:"memos",label:"Mémos"}],formValues:{}}},mounted:function(){},computed:{ser:function(){var e=document.createElement("div");return e.innerHTML=this.editorData,e.querySelectorAll("pre code").forEach((function(e){i.a.highlightBlock(e)})),e.outerHTML}},methods:{modalAddOn:function(){this.modalAdd=!0,this.$refs.child.TimeNow()},PostNewProject:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.child.PostNewProject())}}},l=c,u=o("2877"),p=Object(u["a"])(l,n,r,!1,null,null,null);t["a"]=p.exports},b8a6:function(e,t,o){"use strict";var n=o("bc3a"),r=o.n(n),a=o("bfb1");function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}t["a"]=s(s({},a["a"]),{},{TestDomain:"http://gestiontaches.kksa",baseUrl:"http://gestion-taches-vps.habeuk.com",ModeDebug:!0,postOld:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var a={headers:{}};r.a.post(t.baseUrl+e,o,a).then((function(e){n({status:!0,data:e.data,reponse:e})})).catch((function(e){n({status:!1,error:e.response})}))}))},getOld:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var a={headers:{}};r.a.get(t.baseUrl+e,o,a).then((function(e){console.log("Config get success : ",e),n({status:!0,data:e.data,reponse:e})})).catch((function(e){n({status:!1,error:e.response})}))}))}})},d111:function(e,t,o){"use strict";var n=o("c1df"),r=o.n(n);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var c={formatData:function(e){return new Promise((function(t){console.log("fdate : ",e);var o=[];if(e&&e.titre){var n=r()(e.date_depart_proposer+" "+e.heure_debut,"YYYY-MM-DD  HH:mm").unix(),a=r()(e.date_fin_proposer+" "+e.heure_fin,"YYYY-MM-DD  HH:mm").unix(),i={table:"gestion_project_contents",fields:{text:e.text,titre:e.titre,type:e.type,privaty:e.privaty?1:0},action:"update"};if(e.idcontents&&(i.where=[{column:"idcontents",value:e.idcontents}]),e.date_depart_proposer.length&&e.date_fin_proposer.length){var s={table:"gestion_project_times",fields:{status:e.status,date_depart_proposer:n,date_fin_proposer:a},action:"update",where:[{column:"idcontents",value:e.idcontents}]};1!==parseInt(e.status)||e.date_fin_reel&&""!==e.date_fin_reel||(s.fields.date_fin_reel=r()().unix()),o.push(s)}o.push(i),console.log("ligne",o)}t(o)}))},formatHierarchie:function(e,t){return new Promise((function(o){console.log("fdate : ",t);var n=[];if(e&&e.titre){var r={table:"gestion_project_hierachie",fields:{idcontentsparent:t.id,idcontents:e.idcontents,ordre:t.ordre},action:"update",where:[{column:"idcontents",value:e.idcontents}]};n.push(r),console.log("ligne",n)}o(n)}))},formCard:function(e){var t=[];for(var o in e){var n=e[o];n.cards&&(n.cards=this.formCard(n.cards)),t.push(i(i({},n),{},{open:!1}))}return t},formatAddData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(n){var a=[],i=parseInt(e.status,10);if(o=parseInt(o,10),e.date_depart_proposer.length&&e.date_fin_proposer){var s=r()(e.date_depart_proposer+" "+e.heure_debut,"YYYY-MM-DD  HH:mm").unix(),c=r()(e.date_fin_proposer+" "+e.heure_fin,"YYYY-MM-DD  HH:mm").unix();a.push({table:"gestion_project_times",fields:{date_depart_proposer:s,date_fin_proposer:c,status:i}})}a.push({table:"gestion_project_hierachie",fields:{idcontentsparent:t,ordre:0,level:o}});var l=[];if(e&&e.titre){var u={table:"gestion_project_contents",fields:{text:e.text,titre:e.titre,type:e.type,privaty:e.privaty?1:0}};u.childstable={colum_id_name:"idcontents",tables:a},l.push(u)}n(l)}))},fomatVal:function(e,t){return new Promise((function(o){for(var n in e.idcontents&&(t.idcontents=e.idcontents),t)e[n]&&("date_depart_proposer"===n?(t[n]=r.a.unix(e[n]).format("YYYY-MM-DD"),t.heure_debut=r.a.unix(e[n]).format("HH:mm")):"date_fin_proposer"===n?(t[n]=r.a.unix(e[n]).format("YYYY-MM-DD"),t.heure_fin=r.a.unix(e[n]).format("HH:mm")):t[n]="privaty"===n?"0"==e[n]?0:1:e[n]);o()}))},formatDeleteData:function(e){return new Promise((function(t){var o=[];if(e&&e.titre){var n={table:"gestion_project_contents",fields:{},action:"delete"};e.idcontents&&(n.where=[{column:"idcontents",value:e.idcontents}]),n.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:e.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:e.idcontents}]}]},o.push(n),console.log("ligne",o)}t(o)}))},formatDataClient:function(e){return new Promise((function(t){var o=[];if(e&&e.nom){var n={table:"gestion_project_client",fields:{nom:e.nom,uid:e.uid,prenom:e.prenom,phone:e.phone,adresse:e.adresse,fonction:e.fonction,idsociete:e.idsociete},action:"update"};e.idclient&&(n.where=[{column:"idclient",value:e.idclient}]),o.push(n)}t(o)}))},formatDataSte:function(e){return new Promise((function(t){var o=[];if(e&&e.nom){var n={table:"gestion_project_societe",fields:{nom:e.nom,email:e.email,phone:e.phone,adresse:e.adresse,siteweb:e.siteweb},action:"update"};e.idsociete&&(n.where=[{column:"idsociete",value:e.idsociete}]),o.push(n)}t(o)}))},formatDeleteClient:function(e){return new Promise((function(t){var o=[];if(e.idclient){var n={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:e.idclient}]};o.push(n),console.log("ligne 1",o)}else if(e.idsociete){n={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:e.idsociete}]};var r={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:e.idsociete}]};o.push(n),o.push(r),console.log("ligne2",o)}t(o)}))},formatAddInvoice:function(e,t){return new Promise((function(o){var n=[],a=r()().unix(),i=r()().unix();if(console.log("fadin :",e),e&&e.numero){var s={table:"gestion_project_invoice",fields:{numero:e.numero,idcontents:""!==e.idcontents?e.idcontents:null,idclients:e.idclients,objet:e.objet,creaated:a,proprietaire:e.proprietaire,updated:i}};1==t&&(s.where=[{column:"numero",value:e.numero}],s.action="update"),n.push(s)}o(n)}))},formatDeleteInvoice:function(e){return new Promise((function(t){var o=[];if(e&&e.numero){var n={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:e.numero}]},r={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:e.numero}]};o.push(r),o.push(n)}t(o)}))},formatAddInvoiceList:function(e,t){return new Promise((function(o){var n=[];if(e&&e.titre){var r={table:"gestion_project_invoice_list",fields:{titre:e.titre,idcontents:""!==e.idcontents?e.idcontents:null,description:e.description,cout:e.cout,idinvoice:e.idinvoice}};1==t&&(r.where=[{column:"idinvoicelist",value:e.idinvoicelist}],r.action="update"),n.push(r)}o(n)}))},formatDeleteInvoiceList:function(e){return new Promise((function(t){var o=[];if(console.log("fadin :",e),e&&e.idinvoicelist){var n={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:e.idinvoicelist}]};o.push(n)}t(o)}))}};t["a"]=c},f0ae:function(e,t,o){"use strict";var n=o("b8a6");t["a"]={selectDatas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"c.type",operator:"=",value:"project"}];return new Promise((function(t){var o="";if(e.length)for(var r in e)o+=e[r].column+" "+e[r].operator+" '"+e[r].value+"' ";o+=" ORDER BY  c.`idcontents` DESC",o+=" limit 0,50 ",n["a"].post("/gestion-project/select/selectdatas",o).then((function(e){e.status?t(e.data):t([])}))}))},selectTypes:function(){return new Promise((function(e){n["a"].get("/gestion-project/select/project-type").then((function(t){t.status?e(t.data):e([])}))}))},selectProject:function(e){return new Promise((function(t){var o="";if(e.length)for(var r in e)o+=e[r].column+" "+e[r].operator+" '"+e[r].value+"' ";n["a"].post("/gestion-project/select/select-project",o).then((function(e){e.status?t(e.data):t([])}))}))},selectFatureList:function(e){var t=this;return new Promise((function(o){var r="";if(r+=" select * ",r+=" from ",r+=t.formatStringTable("gestion_project_invoice_list"),e.length)for(var a in r+=" WHERE ",e)r+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";n["a"].post("/gestion-project/select",r).then((function(e){e.status?o(e.data):o([])}))}))},selectInvoice:function(e){var t=this;return new Promise((function(o){var r="";if(r+=" select * ",r+=" from ",r+=t.formatStringTable("gestion_project_invoice"),e.length)for(var a in r+=" WHERE ",e)r+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";n["a"].post("/gestion-project/select",r).then((function(e){e.status?o(e.data):o([])}))}))},selectClients:function(e){var t=this;return new Promise((function(o){var r="";if(r+=" select * ",r+=" from ",r+=t.formatStringTable("gestion_project_client"),e.length)for(var a in r+=" WHERE ",e)r+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";r+=" limit 0,50 ",n["a"].post("/gestion-project/select",r).then((function(e){e.status?o(e.data):o([])}))}))},selectSte:function(e){var t=this;return new Promise((function(o){var r="";if(r+=" select * ",r+=" from ",r+=t.formatStringTable("gestion_project_societe"),e.length)for(var a in r+=" WHERE ",e)r+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";r+=" limit 0,50 ",n["a"].post("/gestion-project/select",r).then((function(e){e.status?o(e.data):o([])}))}))},selectClient:function(e){var t=this;return new Promise((function(o){var r="";r+=" select * ",r+=" from ",r+=t.formatStringTable(e),r+=" limit 0,50 ",n["a"].post("/gestion-project/select",r).then((function(e){e.status?o(e.data):o([])}))}))},selectAll:function(){return new Promise((function(e){var t="";t+=" c.idcontents is not NULL limit 0,50 ",n["a"].post("/gestion-project/select/select-project",t).then((function(t){t.status?e(t.data):e([])}))}))},SelectTacheEnours:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"t.status",operator:"=",value:2}];return new Promise((function(t){var o="";if(e.length)for(var r in e)o+=e[r].column+" "+e[r].operator+" '"+e[r].value+"' ";o+=" ORDER BY  c.`idcontents` DESC ",o+=" limit 0,50 ",n["a"].post("/gestion-project/select/select-tache-enours",o).then((function(e){e.status?t(e.data):t([])}))}))},formatStringTable:function(e){return"{"+e+"}"}}},f9cf:function(e,t,o){"use strict";var n=o("f0ae"),r={opts:[],instance:!1,loadType:function(){var e=this;return new Promise((function(t){e.instance?e.instance.then((function(){t(e.opts)})):e.opts.length||(e.instance=n["a"].selectTypes(),e.instance.then((function(o){var n=[];for(var r in o)n.push({value:o[r].name,label:o[r].label,description:o[r].description});e.opts=n,t(e.opts)})))}))}};t["a"]=r}}]);
//# sourceMappingURL=gestionTache.umd.min.2.js.map