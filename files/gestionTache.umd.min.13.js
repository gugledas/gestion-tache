(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[13],{b1c1:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("AddNew",{ref:"addClient",attrs:{plusColor:"info",selectOption:t.selectOption},on:{"load-list-client":t.LoadClient}}),n("CRow",[n("CCol",{staticClass:"mt-3 mb-2"},[n("ClientList",{attrs:{title:"Liste des Clients",items:t.itemsClient,isLoading:t.cisloading,tableFields:t.fieldsClient},on:{"data-to-edite":t.DataToEdit,"suppression-ok":t.LoadClient}})],1)],1),n("AddNew",{ref:"addSte",attrs:{plusColor:"dark",modalType:!1,modalTitle:"Nouvelle Société",selectOption:t.selectOption},on:{"load-list-ste":t.LoadSte}}),n("CRow",[n("CCol",{staticClass:"mt-3"},[n("ClientList",{attrs:{title:"Liste des Sociétés",items:t.itemsSte,isLoading:t.sisloading,tableFields:t.fieldsSte},on:{"data-to-edite":t.DataToEditSte,"suppression-ok":t.LoadSte}})],1)],1)],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CCard",[n("CCardHeader",[t._v(" "+t._s(t.title)+" "),n("div",{staticClass:"card-header-actions"},[n("a",{staticClass:"card-header-action",attrs:{href:"#",rel:"noreferrer noopener",target:"_blank"}},[n("small",{staticClass:"text-muted"})])])]),n("CCardBody",{},[n("CDataTable",{staticClass:"m-0 table-borderless",attrs:{hover:"",responsive:!1,loading:t.isLoading,items:t.items,fields:t.tableFields,header:!1,cleaner:"","table-filter":"","items-per-page-select":"","items-per-page":5,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var i=e.item;return n("td",{},[n("div",[n("CLink",{staticClass:"text-decoration-none",attrs:{to:{path:"#"}}},[t._v(" "+t._s(i.titre)+" ")])],1),n("div",{staticClass:"small text-muted mt-1"},[n("span",[[t._v("New")],t._e()],2),t._v(" | Crée le: "+t._s(i.created_at)+" ")])])}},{key:"usage",fn:function(e){var i=e.item;return n("td",{},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"float-left"}),n("div",{staticClass:"float-right"},[n("small",{staticClass:"text-bold"},[n("strong",[t._v("Updated: ")]),t._v(" "+t._s(i.update_at))])])])])}},{key:"activity",fn:function(e){var i=e.item;return n("td",{},[n("CRow",{staticClass:"ml-4 d-flex justify-content-arround flex-nowrap"},[n("CButton",{staticClass:"mx-1",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.EditEntity(i)}}},[n("CIcon",{staticClass:"mr-1 text-info",attrs:{name:"cilPencil"}})],1),n("CButton",{staticClass:"mx-1 text-danger",attrs:{color:"dark",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.DeleteModalOn(i)}}},[n("CIcon",{staticClass:"mr-1 text-danger",attrs:{name:"cil-x-circle"}})],1)],1)],1)}}])})],1)],1),n("CModal",{attrs:{title:"Confirmer la suppression",color:"danger",show:t.deleteModal,closeOnBackdrop:!1},on:{"update:show":function(e){t.deleteModal=e}}},[t._v(" êtes vous sûre de vouloir supprimer ce contenu? "),n("br"),n("small",{staticClass:"mt-2 text-center"},[t._v("Cette action est irréversible.")]),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.deleteModal=!1}}},[t._v("Cancel")]),n("CButton",{staticClass:"mx-1",attrs:{color:"danger",desabled:""},on:{click:t.deleteEntity}},[t._v("Supprimer"),t.loading?n("CSpinner",{staticClass:"ml-1",staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"primary"}}):t._e()],1)],1)])],2)],1)},s=[],r=n("d111"),l=n("b8a6"),c={props:{items:{type:Array,required:!0,default:function(){return[]}},title:{type:String,required:!0,default:"title"},isLoading:{type:Boolean,default:!0},tableFields:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{tableFieldse:[{key:"nom",_style:"min-width:550px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"activity",_style:"width:600px;"}],deleteModal:!1,loading:!1,id:""}},methods:{DeleteModalOn:function(t){this.deleteModal=!0,t.idclient,this.id=t},deleteEntity:function(){var t=this;this.loading=!0,r["a"].formatDeleteClient(this.id).then((function(e){console.log(" deleteProject : ",e),l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&t.$emit("suppression-ok"),t.loading=!1,0==t.loading&&(t.deleteModal=!1)})).catch((function(t){console.log("error",t)}))}))},EditEntity:function(t){this.$emit("data-to-edite",t)}}},d=c,u=n("2877"),p=Object(u["a"])(d,a,s,!1,null,null,null),f=p.exports,m=n("f0ae"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CRow",{staticClass:"ml-2 mt-n2 d-flex",attrs:{alignVertical:"center"}},[n("CButton",{attrs:{size:"sm",color:t.plusColor,shape:"pill"},on:{click:t.modalAddOn}},[n("CIcon",{staticClass:"text-white",attrs:{name:"cilPlus",height:35,size:"xl"}})],1),n("h6",{staticClass:"ml-1 mt-1"},[t._v("Nouveau Client")])],1),n("CModal",{attrs:{size:"lg",title:t.modalTitle,color:t.plusColor,show:t.modalAdd,footer:!1},on:{"update:show":function(e){t.modalAdd=e}}},[n("PopUpClient",{ref:"pop",attrs:{modalType:t.modalType,btnState:t.btnStateAdd,formValues:t.dataToEdit,selectOption:t.selectOption},on:{"load-list-client":t.loadListClient,"load-list-ste":t.loadListSte}}),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.modalAdd=!1}}},[t._v(" Cancel ")]),n("CButton",{staticClass:"mx-1",attrs:{color:t.btnStateAdd.state?t.plusColor:"light"},on:{click:t.PostNewClient}},[t._v(" Add ")])],1)])],2)],1)},v=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"check-valid-form":t.checkForSave}},[n("div",{staticClass:"pl-sm-2"},[n("CRow",[n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Name:",placeholder:t.modalType?"Nom du client":"Nom de la société",wasValidated:t.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.inputValidation,autocomplete:"name"},model:{value:t.postData.nom,callback:function(e){t.$set(t.postData,"nom",e)},expression:"postData.nom"}})],1),t.modalType?n("CCol",{attrs:{sm:"5"}},[n("CInput",{attrs:{label:"Prenom:",placeholder:"Prenom"},model:{value:t.postData.prenom,callback:function(e){t.$set(t.postData,"prenom",e)},expression:"postData.prenom"}})],1):t._e(),n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Adresse:",placeholder:"Adresse"},model:{value:t.postData.adresse,callback:function(e){t.$set(t.postData,"adresse",e)},expression:"postData.adresse"}})],1),t.modalType?n("CCol",{attrs:{sm:"3"}},[n("CInput",{attrs:{label:"Uid:",placeholder:"uid",type:"number"},model:{value:t.postData.uid,callback:function(e){t.$set(t.postData,"uid",e)},expression:"postData.uid"}})],1):t._e(),n("CCol",{attrs:{sm:"5"}},[n("CInput",{attrs:{label:"Phone:",placeholder:"Phone"},model:{value:t.postData.phone,callback:function(e){t.$set(t.postData,"phone",e)},expression:"postData.phone"}})],1),t.modalType?t._e():n("CCol",{attrs:{sm:"6"}},[n("CInput",{attrs:{label:"Email:",placeholder:"Email",type:"email",required:"",wasValidated:t.eValidated,validFeedback:"ok",invalidFeedback:"Veuiller entrer un email valide",isValid:t.emailValidation},model:{value:t.postData.email,callback:function(e){t.$set(t.postData,"email",e)},expression:"postData.email"}})],1),t.modalType?t._e():n("CCol",{attrs:{sm:"7"}},[n("CInput",{attrs:{label:"Site Web:",placeholder:"Site Web"},model:{value:t.postData.siteweb,callback:function(e){t.$set(t.postData,"siteweb",e)},expression:"postData.siteweb"}})],1),t.modalType?n("CCol",{attrs:{sm:"7"}},[n("CInput",{attrs:{label:"Fonction:",placeholder:"fonction"},model:{value:t.postData.fonction,callback:function(e){t.$set(t.postData,"fonction",e)},expression:"postData.fonction"}})],1):t._e(),t.modalType?n("CCol",{attrs:{sm:"6"}},[n("CSelect",{attrs:{label:"Société:",options:t.selectOptionFormat,placeholder:"Sélectionner la société du client",value:t.postData.idsociete},on:{"update:value":function(e){return t.$set(t.postData,"idsociete",e)}},model:{value:t.postData.idsociete,callback:function(e){t.$set(t.postData,"idsociete",e)},expression:"postData.idsociete"}})],1):t._e()],1)],1)])},g=[],C={name:"PopUpContent",props:{formValues:{},btnState:{type:Object,default:function(){return{state:!1}}},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return[]}}},components:{},data:function(){return{postData:{typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0",idsociete:""},wasValidated:null,showInputRaison:!1,eValidated:null}},mounted:function(){},watch:{formValues:{deep:!0,handler:function(t){(t.phone||t.nom||t.name)&&(this.postData=t)}}},computed:{selectOptionFormat:function(){var t=[];if(this.selectOption&&this.selectOption.length)for(var e in this.selectOption)t.push({label:this.selectOption[e].nom,value:this.selectOption[e].idsociete});return t},checkForSave:function(){return this.modalType?1==this.wasValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1):1==this.wasValidated&&1==this.eValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1)}},methods:{setBtnState:function(t){this.btnState.state=t},inputValidation:function(t){return t.length<=4?(this.wasValidated=!1,!1):(this.wasValidated=!0,!0)},emailValidation:function(t){var e=function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())};return e(t)?(this.eValidated=!0,!0):(this.eValidated=!1,!1)},EditProject:function(){var t=this;r["a"].formatClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&t.$emit("edition-ok",e),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}))},PostNewClient:function(){var t=this;this.modalType?r["a"].formatDataClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-client")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNewClient error",t)}))})):r["a"].formatDataSte(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-ste")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNew sté error",t)}))}))}}},b=C,y=Object(u["a"])(b,_,g,!1,null,"2384106a",null),w=y.exports,j={name:"SHome",props:{plusColor:{type:String,default:"info"},modalTitle:{type:String,default:"Nouveau client"},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return{}}}},components:{PopUpClient:w},data:function(){return{modalAdd:!1,btnStateAdd:{state:!1},dataToEdit:{}}},methods:{loadStes:function(){this.$refs.pop.LoadSte(),console.log("log")},modalAddOn:function(t){this.modalAdd=!0,this.dataToEdit=t},EditeEntities:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.EditProject())},PostNewClient:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.PostNewClient())},loadListClient:function(){this.$emit("load-list-client")},loadListSte:function(){this.$emit("load-list-ste")}}},D=j,S=Object(u["a"])(D,h,v,!1,null,null,null),x=S.exports,A={name:"SHome",components:{AddNew:x,ClientList:f},data:function(){return{itemsClient:[],itemsSte:[],client:"gestion_project_client",ste:"gestion_project_societe",cisloading:!1,sisloading:!1,dataToEdit:{},selectOption:[],fieldsClient:[{key:"nom",_style:"min-width:200px; ",filter:!1},{key:"adresse",_style:"min-width:200px;"},{key:"phone",_style:"min-width:200px;"},{key:"fonction",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}],fieldsSte:[{key:"nom",_style:"min-width:200px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"email",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}]}},mounted:function(){this.LoadClient(),this.LoadSte(),this.LoadStePopUp()},methods:{LoadStePopUp:function(){var t=this;this.sisloading=!0,m["a"].selectClient("gestion_project_societe").then((function(e){Array.isArray(e)&&(t.selectOption=e),t.sisloading=!1}))},DataToEditSte:function(t){this.dataToEdit=t,this.$refs.addSte.modalAddOn(t)},DataToEdit:function(t){this.dataToEdit=t,this.$refs.addClient.modalAddOn(t)},LoadClient:function(){var t=this;this.cisloading=!0,m["a"].selectClients([]).then((function(e){Array.isArray(e)&&(t.itemsClient=e),t.cisloading=!1}))},LoadSte:function(){var t=this;this.sisloading=!0,m["a"].selectSte([]).then((function(e){Array.isArray(e)&&(t.itemsSte=e),t.sisloading=!1,t.LoadStePopUp(),t.LoadClient()}))}}},P=A,k=Object(u["a"])(P,i,o,!1,null,null,null);e["default"]=k.exports},d111:function(t,e,n){"use strict";var i=n("c1df"),o=n.n(i);function a(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function s(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={formatPrimeData:function(t,e){return new Promise((function(n){var i=[],o={table:"gestion_project_prime",fields:{status:t.status?1:0,montant:Number(t.montant,10),idcontents:t.id}};e&&(o["action"]="update",o["where"]=[{column:"idcontents",value:t.id}]),i.push(o),n(i)}))},formatData:function(t){return new Promise((function(e){console.log("fdate : ",t);var n=[];if(t&&t.titre){var i=o()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),a=o()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix(),s={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"update"};if(t.idcontents&&(s.where=[{column:"idcontents",value:t.idcontents}]),t.date_depart_proposer.length&&t.date_fin_proposer.length){var r={table:"gestion_project_times",fields:{status:t.status,date_depart_proposer:i,date_fin_proposer:a},action:"update",where:[{column:"idcontents",value:t.idcontents}]};1!==parseInt(t.status)||t.date_fin_reel&&""!==t.date_fin_reel||(r.fields.date_fin_reel=o()().unix()),n.push(r)}n.push(s),console.log("ligne",n)}e(n)}))},formatHierarchie:function(t,e){return new Promise((function(n){console.log("fdate : ",e);var i=[];if(t&&t.titre){var o={table:"gestion_project_hierachie",fields:{idcontentsparent:e.id,idcontents:t.idcontents,ordre:e.ordre},action:"update",where:[{column:"idcontents",value:t.idcontents}]};i.push(o),console.log("ligne",i)}n(i)}))},formCard:function(t){var e=[];for(var n in t){var i=t[n];i.cards&&(i.cards=this.formCard(i.cards)),e.push(c(c({},i),{},{open:!1}))}return e},formatAddData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(i){var s=[],r=parseInt(t.status,10);if(n=parseInt(n,10),t.date_depart_proposer.length&&t.date_fin_proposer){var l=o()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),c=o()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix();s.push({table:"gestion_project_times",fields:{date_depart_proposer:l,date_fin_proposer:c,status:r}})}if(s.push({table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0,level:n}}),t.executant&&t.executant.length){var d,u=a(t.executant);try{for(u.s();!(d=u.n()).done;){var p=d.value;s.push({table:"gestion_project_executant",fields:{uid:p["uid"]}})}}catch(h){u.e(h)}finally{u.f()}}t.prime_status&&s.push({table:"gestion_project_prime",fields:{montant:t.prime_montant,status:t.prime_status?1:0}});var f=[];if(t&&t.titre){var m={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"insert"};m.childstable={colum_id_name:"idcontents",tables:s},f.push(m)}console.log("result ligne",f),i(f)}))},fomatVal:function(t,e,n){return new Promise((function(i){t.idcontents&&(e.idcontents=t.idcontents);var s=function(i){if(t[i])if("date_depart_proposer"===i)e[i]=o.a.unix(t[i]).format("YYYY-MM-DD"),e.heure_debut=o.a.unix(t[i]).format("HH:mm");else if("date_fin_proposer"===i)e[i]=o.a.unix(t[i]).format("YYYY-MM-DD"),e.heure_fin=o.a.unix(t[i]).format("HH:mm");else if("privaty"===i)e[i]="0"!=t[i];else if("prime_status"===i)e[i]="0"!=t[i];else if("executant"===i){e[i]=[];var s,r=a(t[i]);try{var l=function(){var t=s.value;n.forEach((function(n){t.uid==n.uid&&e[i].push(n)}))};for(r.s();!(s=r.n()).done;)l()}catch(c){r.e(c)}finally{r.f()}}else e[i]=t[i]};for(var r in e)s(r);i()}))},formatDeleteData:function(t){return new Promise((function(e){var n=[];if(t&&t.titre){var i={table:"gestion_project_contents",fields:{},action:"delete"};t.idcontents&&(i.where=[{column:"idcontents",value:t.idcontents}]),i.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_executant",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]}]},n.push(i),console.log("ligne",n)}e(n)}))},formatDataClient:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var i={table:"gestion_project_client",fields:{nom:t.nom,uid:t.uid,prenom:t.prenom,phone:t.phone,adresse:t.adresse,fonction:t.fonction,idsociete:t.idsociete},action:"update"};t.idclient&&(i.where=[{column:"idclient",value:t.idclient}]),n.push(i)}e(n)}))},formatDataSte:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var i={table:"gestion_project_societe",fields:{nom:t.nom,email:t.email,phone:t.phone,adresse:t.adresse,siteweb:t.siteweb},action:"update"};t.idsociete&&(i.where=[{column:"idsociete",value:t.idsociete}]),n.push(i)}e(n)}))},formatDeleteClient:function(t){return new Promise((function(e){var n=[];if(t.idclient){var i={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:t.idclient}]};n.push(i),console.log("ligne 1",n)}else if(t.idsociete){i={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};var o={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};n.push(i),n.push(o),console.log("ligne2",n)}e(n)}))},formatAddInvoice:function(t,e){return new Promise((function(n){var i=[],a=o()().unix(),s=o()().unix();if(console.log("fadin :",t),t&&t.numero){var r={table:"gestion_project_invoice",fields:{numero:t.numero,idcontents:""!==t.idcontents?t.idcontents:null,idclients:t.idclients,objet:t.objet,creaated:a,proprietaire:t.proprietaire,updated:s}};1==e&&(r.where=[{column:"numero",value:t.numero}],r.action="update"),i.push(r)}n(i)}))},formatDeleteInvoice:function(t){return new Promise((function(e){var n=[];if(t&&t.numero){var i={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:t.numero}]},o={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:t.numero}]};n.push(o),n.push(i)}e(n)}))},formatAddInvoiceList:function(t,e){return new Promise((function(n){var i=[];if(t&&t.titre){var o={table:"gestion_project_invoice_list",fields:{titre:t.titre,idcontents:""!==t.idcontents?t.idcontents:null,description:t.description,cout:t.cout,idinvoice:t.idinvoice}};1==e&&(o.where=[{column:"idinvoicelist",value:t.idinvoicelist}],o.action="update"),i.push(o)}n(i)}))},formatDeleteInvoiceList:function(t){return new Promise((function(e){var n=[];if(console.log("fadin :",t),t&&t.idinvoicelist){var i={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:t.idinvoicelist}]};n.push(i)}e(n)}))}};e["a"]=u},f0ae:function(t,e,n){"use strict";var i=n("b8a6"),o=i["a"].auth;e["a"]={selectDatas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"c.type",operator:"=",value:"project"}];return new Promise((function(e){var n="";if(t.length)for(var a in t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";n+=" ORDER BY  c.`idcontents` DESC",n+=" limit 0,50 ",i["a"].post("/gestion-project/select/selectdatas",n,{headers:{Authorization:o}}).then((function(t){t.status?e(t.data):e([])}))}))},selectTypes:function(){return new Promise((function(t){i["a"].get("/gestion-project/select/project-type",{headers:{Authorization:o}}).then((function(e){e.status?t(e.data):t([])}))}))},selectProject:function(t){return new Promise((function(e){var n="";if(t.length)for(var a in t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";i["a"].post("/gestion-project/select/select-project",n,{headers:{Authorization:o}}).then((function(t){t.status?e(t.data):e([])}))}))},selectFatureList:function(t){var e=this;return new Promise((function(n){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_invoice_list"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";i["a"].post("/gestion-project/select",a,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])}))}))},selectInvoice:function(t){var e=this;return new Promise((function(n){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_invoice"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";i["a"].post("/gestion-project/select",a,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])}))}))},selectClients:function(t){var e=this;return new Promise((function(n){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_client"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";a+=" limit 0,50 ",i["a"].post("/gestion-project/select",a,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])}))}))},selectSte:function(t){var e=this;return new Promise((function(n){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_societe"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";a+=" limit 0,50 ",i["a"].post("/gestion-project/select",a,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])}))}))},selectClient:function(t){var e=this;return new Promise((function(n){var a="";a+=" select * ",a+=" from ",a+=e.formatStringTable(t),a+=" limit 0,50 ",i["a"].post("/gestion-project/select",a,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])}))}))},selectAll:function(){return new Promise((function(t){var e="";e+=" c.idcontents is not NULL order by c.update_at DESC limit 0,30 ",i["a"].post("/gestion-project/select/select-project",e,{headers:{Authorization:o}}).then((function(e){e.status?t(e.data):t([])}))}))},SelectTacheEnours:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"t.status",operator:"=",value:2}];return new Promise((function(e,n){var a="";if(t.length)for(var s in t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";a+=" ORDER BY  c.`idcontents` DESC ",a+=" limit 0,20 ",i["a"].post("/gestion-project/select/select-tache-enours",a,{headers:{Authorization:o}}).then((function(t){t.status?e(t.data):e([])})).catch((function(t){n(t)}))}))},SelectMesTaches:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{column:"t.uid",operator:"=",value:8}];return new Promise((function(n,a){var s="";if(e.length)for(var r in e)s+=e[r].column+" "+e[r].operator+" '"+e[r].value+"' ";s+=" ORDER BY  c.`idcontents` DESC ",s+=" limit 0,20 ",i["a"].post("/gestion-project/select/select-mes-taches/"+t,s,{headers:{Authorization:o}}).then((function(t){t.status?n(t.data):n([])})).catch((function(t){a(t)}))}))},formatStringTable:function(t){return"{"+t+"}"}}}}]);
//# sourceMappingURL=gestionTache.umd.min.13.js.map