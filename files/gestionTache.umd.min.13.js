(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[13],{b1c1:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("AddNew",{ref:"addClient",attrs:{plusColor:"info",selectOption:t.selectOption},on:{"load-list-client":t.LoadClient}}),o("CRow",[o("CCol",{staticClass:"mt-3 mb-2"},[o("ClientList",{attrs:{title:"Liste des Clients",items:t.itemsClient,isLoading:t.cisloading,tableFields:t.fieldsClient},on:{"data-to-edite":t.DataToEdit,"suppression-ok":t.LoadClient}})],1)],1),o("AddNew",{ref:"addSte",attrs:{plusColor:"dark",modalType:!1,modalTitle:"Nouvelle Société",selectOption:t.selectOption},on:{"load-list-ste":t.LoadSte}}),o("CRow",[o("CCol",{staticClass:"mt-3"},[o("ClientList",{attrs:{title:"Liste des Sociétés",items:t.itemsSte,isLoading:t.sisloading,tableFields:t.fieldsSte},on:{"data-to-edite":t.DataToEditSte,"suppression-ok":t.LoadSte}})],1)],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("CCard",[o("CCardHeader",[t._v(" "+t._s(t.title)+" "),o("div",{staticClass:"card-header-actions"},[o("a",{staticClass:"card-header-action",attrs:{href:"#",rel:"noreferrer noopener",target:"_blank"}},[o("small",{staticClass:"text-muted"})])])]),o("CCardBody",{},[o("CDataTable",{staticClass:"m-0 table-borderless",attrs:{hover:"",responsive:!1,loading:t.isLoading,items:t.items,fields:t.tableFields,header:!1,cleaner:"","table-filter":"","items-per-page-select":"","items-per-page":5,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var n=e.item;return o("td",{},[o("div",[o("CLink",{staticClass:"text-decoration-none",attrs:{to:{path:"#"}}},[t._v(" "+t._s(n.titre)+" ")])],1),o("div",{staticClass:"small text-muted mt-1"},[o("span",[[t._v("New")],t._e()],2),t._v(" | Crée le: "+t._s(n.created_at)+" ")])])}},{key:"usage",fn:function(e){var n=e.item;return o("td",{},[o("div",{staticClass:"clearfix"},[o("div",{staticClass:"float-left"}),o("div",{staticClass:"float-right"},[o("small",{staticClass:"text-bold"},[o("strong",[t._v("Updated: ")]),t._v(" "+t._s(n.update_at))])])])])}},{key:"activity",fn:function(e){var n=e.item;return o("td",{},[o("CRow",{staticClass:"ml-4 d-flex justify-content-arround flex-nowrap"},[o("CButton",{staticClass:"mx-1",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.EditEntity(n)}}},[o("CIcon",{staticClass:"mr-1 text-info",attrs:{name:"cilPencil"}})],1),o("CButton",{staticClass:"mx-1 text-danger",attrs:{color:"dark",variant:"ghost",shape:"pill",size:"sm"},on:{click:function(e){return t.DeleteModalOn(n)}}},[o("CIcon",{staticClass:"mr-1 text-danger",attrs:{name:"cil-x-circle"}})],1)],1)],1)}}])})],1)],1),o("CModal",{staticClass:" modal-dialog-scrollable",attrs:{title:"Confirmer la suppression",color:"danger",show:t.deleteModal,closeOnBackdrop:!1},on:{"update:show":function(e){t.deleteModal=e}}},[t._v(" êtes vous sûre de vouloir supprimer ce contenu? "),o("br"),o("small",{staticClass:"mt-2 text-center"},[t._v("Cette action est irréversible.")]),o("template",{slot:"footer"},[o("div",{staticClass:"d-flex justify-content-end mr-3"},[o("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.deleteModal=!1}}},[t._v("Cancel")]),o("CButton",{staticClass:"mx-1",attrs:{color:"danger",desabled:""},on:{click:t.deleteEntity}},[t._v("Supprimer"),t.loading?o("CSpinner",{staticClass:"ml-1",staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"primary"}}):t._e()],1)],1)])],2)],1)},s=[],r=o("d111"),l=o("b8a6"),c={props:{items:{type:Array,required:!0,default:function(){return[]}},title:{type:String,required:!0,default:"title"},isLoading:{type:Boolean,default:!0},tableFields:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{tableFieldse:[{key:"nom",_style:"min-width:550px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"activity",_style:"width:600px;"}],deleteModal:!1,loading:!1,id:""}},methods:{DeleteModalOn:function(t){this.deleteModal=!0,t.idclient,this.id=t},deleteEntity:function(){var t=this;this.loading=!0,r["a"].formatDeleteClient(this.id).then((function(e){console.log(" deleteProject : ",e),l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&t.$emit("suppression-ok"),t.loading=!1,0==t.loading&&(t.deleteModal=!1)})).catch((function(t){console.log("error",t)}))}))},EditEntity:function(t){this.$emit("data-to-edite",t)}}},d=c,u=o("2877"),p=Object(u["a"])(d,a,s,!1,null,null,null),f=p.exports,m=o("f0ae"),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("CRow",{staticClass:"ml-2 mt-n2 d-flex",attrs:{alignVertical:"center"}},[o("CButton",{attrs:{size:"sm",color:t.plusColor,shape:"pill"},on:{click:t.modalAddOn}},[o("CIcon",{staticClass:"text-white",attrs:{name:"cilPlus",height:35,size:"xl"}})],1),o("h6",{staticClass:"ml-1 mt-1"},[t._v("Nouveau Client")])],1),o("CModal",{staticClass:" modal-dialog-scrollable",attrs:{size:"lg",title:t.modalTitle,color:t.plusColor,show:t.modalAdd,footer:!1},on:{"update:show":function(e){t.modalAdd=e}}},[o("PopUpClient",{ref:"pop",attrs:{modalType:t.modalType,btnState:t.btnStateAdd,formValues:t.dataToEdit,selectOption:t.selectOption},on:{"load-list-client":t.loadListClient,"load-list-ste":t.loadListSte}}),o("template",{slot:"footer"},[o("div",{staticClass:"d-flex justify-content-end mr-3"},[o("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.modalAdd=!1}}},[t._v(" Cancel ")]),o("CButton",{staticClass:"mx-1",attrs:{color:t.btnStateAdd.state?t.plusColor:"light"},on:{click:t.PostNewClient}},[t._v(" Add ")])],1)])],2)],1)},v=[],g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{"check-valid-form":t.checkForSave}},[o("div",{staticClass:"pl-sm-2"},[o("CRow",[o("CCol",{attrs:{sm:"6"}},[o("CInput",{attrs:{label:"Name:",placeholder:t.modalType?"Nom du client":"Nom de la société",wasValidated:t.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.inputValidation,autocomplete:"name"},model:{value:t.postData.nom,callback:function(e){t.$set(t.postData,"nom",e)},expression:"postData.nom"}})],1),t.modalType?o("CCol",{attrs:{sm:"5"}},[o("CInput",{attrs:{label:"Prenom:",placeholder:"Prenom"},model:{value:t.postData.prenom,callback:function(e){t.$set(t.postData,"prenom",e)},expression:"postData.prenom"}})],1):t._e(),o("CCol",{attrs:{sm:"6"}},[o("CInput",{attrs:{label:"Adresse:",placeholder:"Adresse"},model:{value:t.postData.adresse,callback:function(e){t.$set(t.postData,"adresse",e)},expression:"postData.adresse"}})],1),t.modalType?o("CCol",{attrs:{sm:"3"}},[o("CInput",{attrs:{label:"Uid:",placeholder:"uid",type:"number"},model:{value:t.postData.uid,callback:function(e){t.$set(t.postData,"uid",e)},expression:"postData.uid"}})],1):t._e(),o("CCol",{attrs:{sm:"5"}},[o("CInput",{attrs:{label:"Phone:",placeholder:"Phone"},model:{value:t.postData.phone,callback:function(e){t.$set(t.postData,"phone",e)},expression:"postData.phone"}})],1),t.modalType?t._e():o("CCol",{attrs:{sm:"6"}},[o("CInput",{attrs:{label:"Email:",placeholder:"Email",type:"email",required:"",wasValidated:t.eValidated,validFeedback:"ok",invalidFeedback:"Veuiller entrer un email valide",isValid:t.emailValidation},model:{value:t.postData.email,callback:function(e){t.$set(t.postData,"email",e)},expression:"postData.email"}})],1),t.modalType?t._e():o("CCol",{attrs:{sm:"7"}},[o("CInput",{attrs:{label:"Site Web:",placeholder:"Site Web"},model:{value:t.postData.siteweb,callback:function(e){t.$set(t.postData,"siteweb",e)},expression:"postData.siteweb"}})],1),t.modalType?o("CCol",{attrs:{sm:"7"}},[o("CInput",{attrs:{label:"Fonction:",placeholder:"fonction"},model:{value:t.postData.fonction,callback:function(e){t.$set(t.postData,"fonction",e)},expression:"postData.fonction"}})],1):t._e(),t.modalType?o("CCol",{attrs:{sm:"6"}},[o("CSelect",{attrs:{label:"Société:",options:t.selectOptionFormat,placeholder:"Sélectionner la société du client",value:t.postData.idsociete},on:{"update:value":function(e){return t.$set(t.postData,"idsociete",e)}},model:{value:t.postData.idsociete,callback:function(e){t.$set(t.postData,"idsociete",e)},expression:"postData.idsociete"}})],1):t._e()],1)],1)])},_=[],C={name:"PopUpContent",props:{formValues:{},btnState:{type:Object,default:function(){return{state:!1}}},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return[]}}},components:{},data:function(){return{postData:{typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0",idsociete:""},wasValidated:null,showInputRaison:!1,eValidated:null}},mounted:function(){},watch:{formValues:{deep:!0,handler:function(t){(t.phone||t.nom||t.name)&&(this.postData=t)}}},computed:{selectOptionFormat:function(){var t=[];if(this.selectOption&&this.selectOption.length)for(var e in this.selectOption)t.push({label:this.selectOption[e].nom,value:this.selectOption[e].idsociete});return t},checkForSave:function(){return this.modalType?1==this.wasValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1):1==this.wasValidated&&1==this.eValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1)}},methods:{setBtnState:function(t){this.btnState.state=t},inputValidation:function(t){return t.length<=4?(this.wasValidated=!1,!1):(this.wasValidated=!0,!0)},emailValidation:function(t){var e=function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())};return e(t)?(this.eValidated=!0,!0):(this.eValidated=!1,!1)},EditProject:function(){var t=this;r["a"].formatClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&t.$emit("edition-ok",e),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}))},PostNewClient:function(){var t=this;this.modalType?r["a"].formatDataClient(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-client")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNewClient error",t)}))})):r["a"].formatDataSte(this.postData).then((function(e){l["a"].post("/gestion-project/save-update",e,{headers:{Authorization:l["a"].auth}}).then((function(e){e.status&&(t.request=e.data[0],t.$emit("load-list-ste")),t.isLoading=!1,t.postData={typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0"}})).catch((function(t){console.log("PostNew sté error",t)}))}))}}},y=C,b=Object(u["a"])(y,g,_,!1,null,"2384106a",null),w=b.exports,D={name:"SHome",props:{plusColor:{type:String,default:"info"},modalTitle:{type:String,default:"Nouveau client"},modalType:{type:Boolean,default:!0},selectOption:{type:Array,default:function(){return{}}}},components:{PopUpClient:w},data:function(){return{modalAdd:!1,btnStateAdd:{state:!1},dataToEdit:{}}},methods:{loadStes:function(){this.$refs.pop.LoadSte(),console.log("log")},modalAddOn:function(t){this.modalAdd=!0,this.dataToEdit=t},EditeEntities:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.EditProject())},PostNewClient:function(){this.btnStateAdd.state&&(this.modalAdd=!1,this.$refs.pop.PostNewClient())},loadListClient:function(){this.$emit("load-list-client")},loadListSte:function(){this.$emit("load-list-ste")}}},j=D,S=Object(u["a"])(j,h,v,!1,null,null,null),x=S.exports,A={name:"SHome",components:{AddNew:x,ClientList:f},data:function(){return{itemsClient:[],itemsSte:[],client:"gestion_project_client",ste:"gestion_project_societe",cisloading:!1,sisloading:!1,dataToEdit:{},selectOption:[],fieldsClient:[{key:"nom",_style:"min-width:200px; ",filter:!1},{key:"adresse",_style:"min-width:200px;"},{key:"phone",_style:"min-width:200px;"},{key:"fonction",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}],fieldsSte:[{key:"nom",_style:"min-width:200px;",filter:!1},{key:"siteweb",_style:"min-width:200px;"},{key:"email",_style:"width:600px;"},{key:"activity",_style:"width:600px;"}]}},mounted:function(){this.LoadClient(),this.LoadSte(),this.LoadStePopUp()},methods:{LoadStePopUp:function(){var t=this;this.sisloading=!0,m["a"].selectClient("gestion_project_societe").then((function(e){Array.isArray(e)&&(t.selectOption=e),t.sisloading=!1}))},DataToEditSte:function(t){this.dataToEdit=t,this.$refs.addSte.modalAddOn(t)},DataToEdit:function(t){this.dataToEdit=t,this.$refs.addClient.modalAddOn(t)},LoadClient:function(){var t=this;this.cisloading=!0,m["a"].selectClients([]).then((function(e){Array.isArray(e)&&(t.itemsClient=e),t.cisloading=!1}))},LoadSte:function(){var t=this;this.sisloading=!0,m["a"].selectSte([]).then((function(e){Array.isArray(e)&&(t.itemsSte=e),t.sisloading=!1,t.LoadStePopUp(),t.LoadClient()}))}}},P=A,O=Object(u["a"])(P,n,i,!1,null,null,null);e["default"]=O.exports},d111:function(t,e,o){"use strict";var n=o("c1df"),i=o.n(n);function a(t,e){var o="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=s(t))||e&&t&&"number"===typeof t.length){o&&(t=o);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return r=t.done,t},e:function(t){l=!0,a=t},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw a}}}}function s(t,e){if(t){if("string"===typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach((function(e){d(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function d(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u={formatPrimeData:function(t,e){return new Promise((function(o){var n=[],i={table:"gestion_project_prime",fields:{status:t.status?1:0,montant:Number(t.montant,10),idcontents:t.id}};e&&(i["action"]="update",i["where"]=[{column:"idcontents",value:t.id}]),n.push(i),o(n)}))},formatData:function(t){return new Promise((function(e){console.log("fdate : ",t);var o=[];if(t&&t.titre){var n=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),a=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix(),s={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"update"};if(t.idcontents&&(s.where=[{column:"idcontents",value:t.idcontents}]),t.date_depart_proposer.length&&t.date_fin_proposer.length){var r={table:"gestion_project_times",fields:{status:t.status,date_depart_proposer:n,date_fin_proposer:a},action:"update",where:[{column:"idcontents",value:t.idcontents}]};1!==parseInt(t.status)||t.date_fin_reel&&""!==t.date_fin_reel||(r.fields.date_fin_reel=i()().unix()),o.push(r)}o.push(s),console.log("ligne",o)}e(o)}))},formatHierarchie:function(t,e){return new Promise((function(o){console.log("fdate : ",e);var n=[];if(t&&t.titre){var i={table:"gestion_project_hierachie",fields:{idcontentsparent:e.id,idcontents:t.idcontents,ordre:e.ordre},action:"update",where:[{column:"idcontents",value:t.idcontents}]};n.push(i),console.log("ligne",n)}o(n)}))},formCard:function(t){var e=[];for(var o in t){var n=t[o];n.cards&&(n.cards=this.formCard(n.cards)),e.push(c(c({},n),{},{open:!1}))}return e},formatAddData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(n){var s=[],r=parseInt(t.status,10);if(o=parseInt(o,10),t.date_depart_proposer.length&&t.date_fin_proposer){var l=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),c=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix();s.push({table:"gestion_project_times",fields:{date_depart_proposer:l,date_fin_proposer:c,status:r}})}if(s.push({table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0,level:o}}),t.executant&&t.executant.length){var d,u=a(t.executant);try{for(u.s();!(d=u.n()).done;){var p=d.value;s.push({table:"gestion_project_executant",fields:{uid:p["uid"]}})}}catch(h){u.e(h)}finally{u.f()}}t.prime_status&&s.push({table:"gestion_project_prime",fields:{montant:t.prime_montant,status:t.prime_status?1:0}});var f=[];if(t&&t.titre){var m={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"insert"};m.childstable={colum_id_name:"idcontents",tables:s},f.push(m)}console.log("result ligne",f),n(f)}))},fomatVal:function(t,e,o){return new Promise((function(n){t.idcontents&&(e.idcontents=t.idcontents);var s=function(n){if(t[n])if("date_depart_proposer"===n)e[n]=i.a.unix(t[n]).format("YYYY-MM-DD"),e.heure_debut=i.a.unix(t[n]).format("HH:mm");else if("date_fin_proposer"===n)e[n]=i.a.unix(t[n]).format("YYYY-MM-DD"),e.heure_fin=i.a.unix(t[n]).format("HH:mm");else if("privaty"===n)e[n]="0"!=t[n];else if("prime_status"===n)e[n]="0"!=t[n];else if("executant"===n){e[n]=[];var s,r=a(t[n]);try{var l=function(){var t=s.value;o.forEach((function(o){t.uid==o.uid&&e[n].push(o)}))};for(r.s();!(s=r.n()).done;)l()}catch(c){r.e(c)}finally{r.f()}}else e[n]=t[n]};for(var r in e)s(r);n()}))},formatDeleteData:function(t){return new Promise((function(e){var o=[];if(t&&t.titre){var n={table:"gestion_project_contents",fields:{},action:"delete"};t.idcontents&&(n.where=[{column:"idcontents",value:t.idcontents}]),n.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_executant",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]}]},o.push(n),console.log("ligne",o)}e(o)}))},formatDataClient:function(t){return new Promise((function(e){var o=[];if(t&&t.nom){var n={table:"gestion_project_client",fields:{nom:t.nom,uid:t.uid,prenom:t.prenom,phone:t.phone,adresse:t.adresse,fonction:t.fonction,idsociete:t.idsociete},action:"update"};t.idclient&&(n.where=[{column:"idclient",value:t.idclient}]),o.push(n)}e(o)}))},formatDataSte:function(t){return new Promise((function(e){var o=[];if(t&&t.nom){var n={table:"gestion_project_societe",fields:{nom:t.nom,email:t.email,phone:t.phone,adresse:t.adresse,siteweb:t.siteweb},action:"update"};t.idsociete&&(n.where=[{column:"idsociete",value:t.idsociete}]),o.push(n)}e(o)}))},formatDeleteClient:function(t){return new Promise((function(e){var o=[];if(t.idclient){var n={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:t.idclient}]};o.push(n),console.log("ligne 1",o)}else if(t.idsociete){n={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};var i={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};o.push(n),o.push(i),console.log("ligne2",o)}e(o)}))},formatAddInvoice:function(t,e){return new Promise((function(o){var n=[],a=i()().unix(),s=i()().unix();if(console.log("fadin :",t),t&&t.numero){var r={table:"gestion_project_invoice",fields:{numero:t.numero,idcontents:""!==t.idcontents?t.idcontents:null,idclients:t.idclients,objet:t.objet,creaated:a,proprietaire:t.proprietaire,updated:s}};1==e&&(r.where=[{column:"numero",value:t.numero}],r.action="update"),n.push(r)}o(n)}))},formatDeleteInvoice:function(t){return new Promise((function(e){var o=[];if(t&&t.numero){var n={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:t.numero}]},i={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:t.numero}]};o.push(i),o.push(n)}e(o)}))},formatAddInvoiceList:function(t,e){return new Promise((function(o){var n=[];if(t&&t.titre){var i={table:"gestion_project_invoice_list",fields:{titre:t.titre,idcontents:""!==t.idcontents?t.idcontents:null,description:t.description,cout:t.cout,idinvoice:t.idinvoice}};1==e&&(i.where=[{column:"idinvoicelist",value:t.idinvoicelist}],i.action="update"),n.push(i)}o(n)}))},formatDeleteInvoiceList:function(t){return new Promise((function(e){var o=[];if(console.log("fadin :",t),t&&t.idinvoicelist){var n={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:t.idinvoicelist}]};o.push(n)}e(o)}))}};e["a"]=u},f0ae:function(t,e,o){"use strict";var n=o("b8a6"),i=n["a"].auth;e["a"]={selectDatas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"gpc.type",operator:"=",value:"project"}];return new Promise((function(e){var o={where:"",orther_query:""};t.length&&(o.where+=n["a"].formatWhere(t)),o.orther_query+=" ORDER BY  gpc.`idcontents` DESC ",o.orther_query+=" limit 0,50 ",n["a"].post("/gestion-project/select/selectdatas",o,{headers:{Authorization:i}}).then((function(t){t.status?e(t.data):e([])}))}))},selectTypes:function(){return new Promise((function(t){n["a"].get("/gestion-project/select/project-type",{headers:{Authorization:i}}).then((function(e){e.status?t(e.data):t([])}))}))},selectProject:function(t){return new Promise((function(e){var o="";if(t.length)for(var a in t)o+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";n["a"].post("/gestion-project/select/select-project",o,{headers:{Authorization:i}}).then((function(t){t.status?e(t.data):e([])}))}))},selectFatureList:function(t){var e=this;return new Promise((function(o){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_invoice_list"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";n["a"].post("/gestion-project/select",a,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])}))}))},selectInvoice:function(t){var e=this;return new Promise((function(o){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_invoice"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";n["a"].post("/gestion-project/select",a,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])}))}))},selectClients:function(t){var e=this;return new Promise((function(o){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_client"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";a+=" limit 0,50 ",n["a"].post("/gestion-project/select",a,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])}))}))},selectSte:function(t){var e=this;return new Promise((function(o){var a="";if(a+=" select * ",a+=" from ",a+=e.formatStringTable("gestion_project_societe"),t.length)for(var s in a+=" WHERE ",t)a+=t[s].column+" "+t[s].operator+" '"+t[s].value+"' ";a+=" limit 0,50 ",n["a"].post("/gestion-project/select",a,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])}))}))},selectClient:function(t){var e=this;return new Promise((function(o){var a="";a+=" select * ",a+=" from ",a+=e.formatStringTable(t),a+=" limit 0,50 ",n["a"].post("/gestion-project/select",a,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])}))}))},selectAll:function(){return new Promise((function(t){var e="";e+=" gpc.idcontents is not NULL order by gpc.update_at DESC limit 0,30 ",n["a"].post("/gestion-project/select/select-project",e,{headers:{Authorization:i}}).then((function(e){e.status?t(e.data):t([])}))}))},SelectTacheEnours:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"gpt.status",operator:"=",value:2}];return new Promise((function(e,o){var a={where:"",orther_query:""};t.length&&(a.where+=n["a"].formatWhere(t)),a.orther_query+=" ORDER BY  gpc.`idcontents` DESC ",a.orther_query+=" limit 0,20 ",n["a"].post("/gestion-project/select/select-tache-enours",a,{headers:{Authorization:i}}).then((function(t){t.status?e(t.data):e([])})).catch((function(t){o(t)}))}))},SelectMesTaches:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{column:"gpe.uid",operator:"=",value:8}];return new Promise((function(o,a){var s={where:"",orther_query:""};e.length&&(s.where+=n["a"].formatWhere(e)),s.orther_query+=" ORDER BY  gpc.`idcontents` DESC ",s.orther_query+=" limit 0,20 ",n["a"].post("/gestion-project/select/select-mes-taches/"+t,s,{headers:{Authorization:i}}).then((function(t){t.status?o(t.data):o([])})).catch((function(t){a(t)}))}))},SelectNotesAd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{column:"gpc.type",operator:"=",value:"note"},{column:"gpe.uid",operator:"=",value:t},{column:"gpt.status",operator:"!=",value:1}];return new Promise((function(t,o){var a={where:"",orther_query:""};e.length&&(a.where+=n["a"].formatWhere(e)),a.orther_query+=" ORDER BY  gpc.`idcontents` DESC ",a.orther_query+=" limit 0,20 ",n["a"].post("/gestion-project/custom-request",a,{headers:{Authorization:i}}).then((function(e){e.status?t(e.data):t([])})).catch((function(t){o(t)}))}))},formatStringTable:function(t){return"{"+t+"}"}}}}]);
//# sourceMappingURL=gestionTache.umd.min.13.js.map