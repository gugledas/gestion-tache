(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[8],{1864:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("CRow",[o("CCol",[o("CCard",[o("CCardHeader",[o("strong",[t._v("Édition facture N°: "+t._s(this.id))]),o("div",{staticClass:"card-header-actions"},[o("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Nouveau service",expression:"'Nouveau service'"}],staticClass:"   p-0 pl-1 pr-1 mr-3",attrs:{color:"info"},on:{click:function(e){t.colapse=!t.colapse}}},[o("CIcon",{attrs:{name:"cil-chevron-"+(t.colapse?"bottom":"top")}})],1)],1)]),t.colapse?o("div",[o("CCardBody",[t.isLoading?t._e():o("div",{staticClass:" d-flex flex-wrap"},[o("CCol",{attrs:{sm:"6",md:"5"}},[o("CInput",{attrs:{placeholder:"libellé du service",wasValidated:t.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.inputValidation,label:" titre:"},model:{value:t.invoiceData.titre,callback:function(e){t.$set(t.invoiceData,"titre",e)},expression:"invoiceData.titre"}})],1),o("CCol",{attrs:{sm:"4",md:"3"}},[o("CInput",{attrs:{placeholder:"100.00",append:"$",label:" Coût",wasValidated:t.priceValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.priceValidation},model:{value:t.invoiceData.cout,callback:function(e){t.$set(t.invoiceData,"cout",e)},expression:"invoiceData.cout"}})],1),o("CCol",{attrs:{sm:"8",md:"6"}},[o("CTextarea",{attrs:{label:" description:",placeholder:"ajouter une description"},model:{value:t.invoiceData.description,callback:function(e){t.$set(t.invoiceData,"description",e)},expression:"invoiceData.description"}})],1)],1),t.isLoading?o("CRow",{attrs:{alignHorizontal:"center"}},[o("CCol",{staticClass:"p-3",attrs:{sm:"3"}},[o("CSpinner",{staticStyle:{width:"4rem",height:"4rem"},attrs:{color:"info",grow:""}})],1)],1):t._e()],1),o("CCardFooter",[o("CButton",{attrs:{type:"submit",size:"sm",color:"primary"}},[o("CIcon",{attrs:{name:"cilCloudDownload"}}),t._v(" Exporter")],1),o("CButton",{staticClass:"mx-3",attrs:{type:"reset",size:"sm",color:t.checkForSave?"success":"light"},on:{click:t.PostFactureList}},[o("CIcon",{attrs:{name:"cil-check-circle"}}),t._v(" Ajouter "),t.spinnerSave?o("CSpinner",{staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"danger"}}):t._e()],1),o("CButton",{staticClass:"mx-3",attrs:{size:"sm",color:"dark"},on:{click:function(e){t.hideFact=!t.hideFact}}},[o("CIcon",{attrs:{name:"cil-low-vision"}}),t._v(" Aperçue")],1)],1)],1):t._e()],1)],1)],1),o("vue-html2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!0,"preview-modal":!0,"paginate-elements-by-height":1400,filename:"hee hee","pdf-quality":2,"manual-pagination":!1,"pdf-format":"a4","pdf-orientation":"landscape","pdf-content-width":"800px"},on:{progress:function(e){return t.onProgress(e)},hasStartedGeneration:function(e){return t.hasStartedGeneration()},hasGenerated:function(e){return t.hasGenerated(e)}}},[o("section",{attrs:{slot:"pdf-content"},slot:"pdf-content"},[t._v(" hello "),t.hideFact?o("CRow",{attrs:{alignHorizontal:"center"}},[o("CCol",{attrs:{col:"10"}},[o("CCard",{staticClass:"facture shadow"},[o("div",{staticClass:"facture__header"},[o("CRow",{staticClass:"first-header text-center p-5 m-0",attrs:{alignVertical:"center"}},[o("CCol",[o("img",{staticClass:"pr-2 mt-2",attrs:{src:i("f840"),height:"40",width:"150"}})]),o("CCol",{staticClass:"display-inv"},[t._v(" FACTURE N°: "),o("strong",[t._v(t._s(t.factureData.numero))])])],1),o("CRow",{staticClass:"second-header m-0 text-center",attrs:{alignVertical:"center"}},[o("CCol",{staticClass:"bg-info pt-2"},[o("p",[t._v(" Invoice # "),o("strong",[t._v(t._s(t.factureData.numero))])])]),o("CCol",{staticClass:"pt-2"},[o("p",[o("Strong",{staticClass:"px-2"},[t._v("Date:")]),t._v(" 01/02/2020")],1)])],1)],1),o("CRow",{staticClass:"my-3",attrs:{tag:"div"}},[o("CCol",{staticClass:"facture__id p-3 d-flex ml-4 justify-content-start"},[o("h5",[t._v("Invoice of :")]),o("div",{staticClass:"ml-2"},[o("h5",{staticClass:"text-uppercase"},[t._v(" "+t._s(t.societeInfoste.nom)+" ")]),o("h6",[t._v(t._s(t.societeInfoste.adresse))]),o("h6",[t._v("Tel: "+t._s(t.societeInfoste.phone))]),o("h6",[t._v("site web: "+t._s(t.societeInfoste.siteweb))]),o("h6",[t._v("Email: "+t._s(t.societeInfoste.email))]),o("h6",[t._v("Émit par: "+t._s(t.infoSte.nom)+" "+t._s(t.infoSte.prenom))])])]),o("CCol",{staticClass:"facture__id p-3 d-flex mr-5 pr-3 justify-content-center"},[o("h5",[t._v("Invoice to :")]),o("div",{staticClass:"ml-2"},[o("h5",{staticClass:"text-uppercase"},[t._v(" "+t._s(t.societeInfoClient.nom)+" ")]),o("h6",[t._v(t._s(t.clientInfo.nom)+" "+t._s(t.clientInfo.prenom))]),o("h6",[t._v(t._s(t.societeInfoClient.adresse))]),o("h6",[t._v("site web: "+t._s(t.societeInfoClient.siteweb))]),o("h6",[t._v("Tel: "+t._s(t.societeInfoClient.phone))]),o("h6",[t._v("Email: "+t._s(t.societeInfoClient.email))])])])],1),o("CRow",{staticClass:"mb-2 ",attrs:{alignHorizontal:"center",alignVertical:"center"}},[o("CCol",{staticClass:"d-flex aligns-item-center ml-4",attrs:{md:"11"}},[t._v(" OBJECT: "),o("strong",{staticClass:"ml-3 m-0"},[t._v(" "+t._s(t.factureData.objet)+" ")])])],1),o("CModal",{attrs:{closeOnBackdrop:!1,color:"dark",show:t.editRow,footer:!1,size:"lg"},on:{"update:show":function(e){t.editRow=e}}},[o("CRow",[o("CCol",{attrs:{sm:"7",lg:"5"}},[o("CInput",{attrs:{placeholder:"libellé du service",wasValidated:t.wasValidated,validFeedback:"ok",invalidFeedback:"requis",isValid:t.inputValidation,label:" titre:"},model:{value:t.invoiceData.titre,callback:function(e){t.$set(t.invoiceData,"titre",e)},expression:"invoiceData.titre"}})],1),o("CCol",{attrs:{sm:"6",lg:"3"}},[o("CInput",{attrs:{placeholder:"100.00",append:"$",label:" Coût",wasValidated:t.priceValidated,isValid:t.priceValidation},model:{value:t.invoiceData.cout,callback:function(e){t.$set(t.invoiceData,"cout",e)},expression:"invoiceData.cout"}})],1)],1),o("CRow",[o("CCol",{attrs:{sm:"8",lg:"6"}},[o("CTextarea",{attrs:{label:" description:",placeholder:"ajouter une description"},model:{value:t.invoiceData.description,callback:function(e){t.$set(t.invoiceData,"description",e)},expression:"invoiceData.description"}})],1)],1),o("template",{slot:"footer"},[o("div",{staticClass:"d-flex justify-content-end mr-3 "},[o("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.editRow=!1}}},[t._v(" Cancel ")]),o("CButton",{staticClass:"mx-1",attrs:{color:t.checkForSave?"info":"light"},on:{click:t.EditeFactureList}},[t._v(" Save "),t.spinnerSave?o("CSpinner",{staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"warning"}}):t._e()],1),o("CButton",{staticClass:"mx-1",attrs:{color:"danger",size:"sm",variant:"ghost"},on:{click:t.deleteFacturelist}},[t._v(" Supprimer "),t.spinner?o("CSpinner",{staticStyle:{width:"1rem",height:"1rem"},attrs:{size:"sm",tag:"small",color:"primary"}}):t._e()],1)],1)])],2),o("CRow",{staticClass:"mb-2",attrs:{alignHorizontal:"center"}},[o("CCol",{attrs:{md:"11"}},[o("CDataTable",{attrs:{striped:"",outlined:"",hover:"",loading:t.isLoading,responsive:!1,items:t.factTable,fields:t.facFields,"head-color":"light",clickableRows:!0,"no-sorting":""},on:{"row-clicked":t.ligneClique},scopedSlots:t._u([{key:"total",fn:function(e){var i=e.item;return o("td",{},[o("Strong",[t._v(t._s(i.cout))])],1)}}],null,!1,1043895145)},[o("td",{attrs:{slot:"Qte"},slot:"Qte"},[o("Strong",[t._v(t._s(1))])],1)])],1)],1),o("CRow",{staticClass:"mt-2",attrs:{alignHorizontal:"center"}},[o("CCol",{staticClass:"d-flex",attrs:{col:"11"}},[o("CCol",{attrs:{col:"6"}},[o("div",[o("h5",[t._v("Payment Info:")]),o("p",{staticClass:"m-0"},[t._v(" Account #: "),o("strong",{staticClass:"ml-2"},[t._v(" 551 254 251 015")])]),o("p",{staticClass:"m-0"},[t._v(" ACT Name: "),o("strong",{staticClass:"ml-2"},[t._v(" Lorem Ipsum")])]),o("p",{staticClass:"m-0"},[t._v(" Bank details:"),o("strong",{staticClass:"ml-2"},[t._v(" Add Your bank Details ")])])])]),o("CCol",{staticClass:"ml-5",attrs:{col:"6"}},[o("div",{staticClass:"d-flex justify-content-around bg-info mt-2 text-white p-2 mr-4"},[o("h5",[t._v("Total:")]),o("span",{staticClass:"ml-5 h5"},[t._v(t._s(t.TotalFacture)+" $")])])])],1)],1),o("CRow",{staticClass:"mt-5 mb-4",attrs:{alignHorizontal:"center"}},[o("CCol",{staticClass:"d-flex mb-3",attrs:{col:"11"}},[o("CCol",{attrs:{col:"6"}},[o("h5",[t._v("Terms & conditions")]),o("h6",{staticClass:" p-0 m-0"},[t._v(" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Cupiditate architecto cum aliquam aut ut? ")])]),o("CCol",{staticClass:"pt-4 mt-5 text-center",attrs:{col:"6"}},[o("p",{staticClass:"m-0 p-0"},[t._v("______________________________")]),o("h6",{staticClass:"mt-1"},[t._v("Authorised sign")])])],1)],1),o("CRow",[o("CCol",{attrs:{col:"12"}},[o("CCol",{staticClass:"bg-light p-0"},[o("div",{staticClass:"d-flex justify-content-around bg-info mt-2 text-white p-2 col-6"},[o("h5",[t._v("Thanks for your Business")])])])],1)],1)],1)],1)],1):t._e()],1)]),o("div",[o("CButton",{staticClass:"mx-3",attrs:{size:"sm",color:"dark"},on:{click:t.generateReport}},[o("CIcon",{attrs:{name:"cil-low-vision"}}),t._v(" Export to PDF ")],1)],1)],1)},n=[],a=i("f0ae"),s=i("d111"),r=i("b8a6"),c=i("6480"),l={name:"SHome",props:{id:{type:String,default:"2"}},components:{VueHtml2pdf:c["a"]},data:function(){return{editRow:!1,factTable:[],facFields:[{key:"Qte",label:"Quantité"},{label:"Désignation ",key:"titre"},{key:"cout",label:"Prix unitaire HT",_style:""},{label:"Prix total HT",key:"total"}],factureData:{objet:"",description:"",cout:"",idcontents:"",numero:""},invoiceData:{idinvoicelist:"",idcontents:"",idinvoice:"",cout:"",description:"",titre:""},clientInfo:{typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0",idsociete:""},infoSte:{typeIsOk:!1,nom:"",prenom:"",fonction:"",siteweb:"",email:"",adresse:"",phone:"",uid:"0",idsociete:""},infoProjet:{created_at:"",idcontents:"",titre:"",type:"",uid:"",update_at:""},societeInfoste:{idsociete:"",nom:"",siteweb:"",phone:"",email:"",adresse:""},societeInfoClient:{idsociete:"",nom:"",siteweb:"",phone:"",email:"",adresse:""},request:{},update:!0,hideFact:!0,isLoading:!1,spinner:!1,spinnerSave:!1,wasValidated:!1,btnState:!1,colapse:!1,priceValidated:!1}},mounted:function(){this.LoadData(),this.LoadFactureList()},watch:{invoiceData:{deep:!0,handler:function(){this.invoiceData.idinvoice=this.id,this.infoProjet.idcontents&&(this.invoiceData.idcontents=this.infoProjet.idcontents)}}},computed:{checkForSave:function(){return this.wasValidated&&this.priceValidated?(this.setBtnState(!0),!0):(this.setBtnState(!1),!1)},TotalFacture:function(){var t=0;if(this.factTable.length)for(var e in this.factTable)if(this.factTable[e].cout>0){var i=parseInt(this.factTable[e].cout,10);t+=i}return t}},methods:{generateReport:function(){this.$refs.html2Pdf.generatePdf()},priceValidation:function(t){if(void 0!=t)return t.length<1?(this.priceValidated=!1,!1):(this.priceValidated=!0,!0)},setBtnState:function(t){this.btnState=t},inputValidation:function(t){return void 0!=t&&(void 0!=t?t.length>=3?(this.wasValidated=!0,!0):(this.wasValidated=!1,!1):void 0)},EditeFactureList:function(){this.PostFactureList(this.update),this.editRow=!1},ligneClique:function(t){this.invoiceData=t,this.editRow=!0},LoadData:function(){var t=this,e=[{column:"numero",operator:"=",value:this.id}];a["a"].selectInvoice(e).then((function(e){t.factureData=e[0],t.LoadClient(e[0].idclients),t.LoadSte(e[0].proprietaire),t.LoadProjet(e[0].idcontents)}))},LoadClient:function(t){var e=this,i=[{column:"idclient",operator:"=",value:t}];a["a"].selectClients(i).then((function(t){e.clientInfo=t[0],t.length&&e.LoadSocieteClient(t[0].idsociete)}))},LoadSte:function(t){var e=this,i=[{column:"idclient",operator:"=",value:t}];a["a"].selectClients(i).then((function(t){e.infoSte=t[0],t.length&&e.LoadSocieteInfo(t[0].idsociete)}))},LoadSocieteInfo:function(t){var e=this,i=[{column:"idsociete",operator:"=",value:t}];a["a"].selectSte(i).then((function(t){e.societeInfoste=t[0]}))},LoadSocieteClient:function(t){var e=this,i=[{column:"idsociete",operator:"=",value:t}];a["a"].selectSte(i).then((function(t){e.societeInfoClient=t[0]}))},LoadProjet:function(t){var e=this;if(t){var i=[{column:"idcontents",operator:"=",value:t}];a["a"].selectProject(i).then((function(t){e.infoProjet=t[0]}))}},PostFactureList:function(t){var e=this;this.btnState&&(this.isloading=!0,s["a"].formatAddInvoiceList(this.invoiceData,t).then((function(t){console.log("gestion_project_invoice_list : ",t),r["a"].post("/gestion-project/save-update",t).then((function(t){t.status&&(e.request=t.data[0],e.LoadFactureList(),e.invoiceData={idinvoicelist:"",idcontents:"",idinvoice:"",cout:"",titre:"",description:""}),e.isloading=!1})).catch((function(t){console.log("error",t),this.isLoading=!1,this.alertOk=!0,this.alertText="Erreur de sauvegarde",this.AlertColor="danger",this.showInput=!0}))})))},LoadFactureList:function(){var t=this,e=[{column:"idinvoice",operator:"=",value:this.id}];a["a"].selectFatureList(e).then((function(e){t.factTable=e}))},deleteFacturelist:function(){var t=this;this.spinner=!0,this.isloading=!0,s["a"].formatDeleteInvoiceList(this.invoiceData).then((function(e){r["a"].post("/gestion-project/save-update",e).then((function(e){e.status?(t.request=e.data[0],t.LoadFactureList()):console.log("error delete Facturelist",e.status),t.isloading=!1,t.spinner=!1,t.editRow=!1})).catch((function(t){console.log("error",t)}))}))}}},d=l,u=(i("b965"),i("2877")),f=Object(u["a"])(d,o,n,!1,null,null,null);e["default"]=f.exports},"7afe":function(t,e,i){},b8a6:function(t,e,i){"use strict";var o=i("bc3a"),n=i.n(o);console.log("windon : "),e["a"]={baseUrl:"localhost"===window.location.hostname?"http://gestion-taches.kksa":"",ModeDebug:!0,post:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(o){var a={headers:{}};n.a.post(e.baseUrl+t,i,a).then((function(t){o({status:!0,data:t.data,reponse:t})})).catch((function(t){o({status:!1,error:t.response})}))}))},get:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(o){var a={headers:{}};n.a.get(e.baseUrl+t,i,a).then((function(t){console.log("Config get success : ",t),o({status:!0,data:t.data,reponse:t})})).catch((function(t){o({status:!1,error:t.response})}))}))}}},b965:function(t,e,i){"use strict";i("7afe")},d111:function(t,e,i){"use strict";var o=i("c1df"),n=i.n(o);function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={formatData:function(t){return new Promise((function(e){var i=[];if(t&&t.titre){var o=n()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),a=n()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix(),s={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type},action:"update"};if(t.idcontents&&(s.where=[{column:"idcontents",value:t.idcontents}]),t.date_depart_proposer.length&&t.date_fin_proposer.length){var r={table:"gestion_project_times",fields:{status:t.status,date_depart_proposer:o,date_fin_proposer:a},action:"update",where:[{column:"idcontents",value:t.idcontents}]};1!==parseInt(t.status)||t.date_fin_reel&&""!==t.date_fin_reel||(r.fields.date_fin_reel=n()().unix()),i.push(r)}i.push(s),console.log("ligne",i)}e(i)}))},formatHierarchie:function(t,e){return new Promise((function(i){console.log("fdate : ",e);var o=[];if(t&&t.titre){var n={table:"gestion_project_hierachie",fields:{idcontentsparent:e.id,idcontents:t.idcontents,ordre:e.ordre},action:"update",where:[{column:"idcontents",value:t.idcontents}]};o.push(n),console.log("ligne",o)}i(o)}))},formCard:function(t){var e=[];for(var i in t){var o=t[i];o.cards&&(o.cards=this.formCard(o.cards)),e.push(s(s({},o),{},{open:!1}))}return e},formatAddData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(o){var a=[],s=parseInt(t.status,10);if(i=parseInt(i,10),t.date_depart_proposer.length&&t.date_fin_proposer){var r=n()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),c=n()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix();a.push({table:"gestion_project_times",fields:{date_depart_proposer:r,date_fin_proposer:c,status:s}})}a.push({table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0,level:i}});var l=[];if(t&&t.titre){var d={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type}};d.childstable={colum_id_name:"idcontents",tables:a},l.push(d)}o(l)}))},fomatVal:function(t,e){return new Promise((function(i){for(var o in t.idcontents&&(e.idcontents=t.idcontents),e)t[o]&&("date_depart_proposer"===o?(e[o]=n.a.unix(t[o]).format("YYYY-MM-DD"),e.heure_debut=n.a.unix(t[o]).format("HH:mm")):"date_fin_proposer"===o?(e[o]=n.a.unix(t[o]).format("YYYY-MM-DD"),e.heure_fin=n.a.unix(t[o]).format("HH:mm")):e[o]=t[o]);i()}))},formatDeleteData:function(t){return new Promise((function(e){var i=[];if(t&&t.titre){var o={table:"gestion_project_contents",fields:{},action:"delete"};t.idcontents&&(o.where=[{column:"idcontents",value:t.idcontents}]),o.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]}]},i.push(o),console.log("ligne",i)}e(i)}))},formatDataClient:function(t){return new Promise((function(e){var i=[];if(t&&t.nom){var o={table:"gestion_project_client",fields:{nom:t.nom,uid:t.uid,prenom:t.prenom,phone:t.phone,adresse:t.adresse,fonction:t.fonction,idsociete:t.idsociete},action:"update"};t.idclient&&(o.where=[{column:"idclient",value:t.idclient}]),i.push(o)}e(i)}))},formatDataSte:function(t){return new Promise((function(e){var i=[];if(t&&t.nom){var o={table:"gestion_project_societe",fields:{nom:t.nom,email:t.email,phone:t.phone,adresse:t.adresse,siteweb:t.siteweb},action:"update"};t.idsociete&&(o.where=[{column:"idsociete",value:t.idsociete}]),i.push(o)}e(i)}))},formatDeleteClient:function(t){return new Promise((function(e){var i=[];if(t.idclient){var o={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:t.idclient}]};i.push(o),console.log("ligne 1",i)}else if(t.idsociete){o={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};var n={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};i.push(o),i.push(n),console.log("ligne2",i)}e(i)}))},formatAddInvoice:function(t,e){return new Promise((function(i){var o=[],a=n()().unix(),s=n()().unix();if(console.log("fadin :",t),t&&t.numero){var r={table:"gestion_project_invoice",fields:{numero:t.numero,idcontents:""!==t.idcontents?t.idcontents:null,idclients:t.idclients,objet:t.objet,creaated:a,proprietaire:t.proprietaire,updated:s}};1==e&&(r.where=[{column:"numero",value:t.numero}],r.action="update"),o.push(r)}i(o)}))},formatDeleteInvoice:function(t){return new Promise((function(e){var i=[];if(t&&t.numero){var o={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:t.numero}]},n={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:t.numero}]};i.push(n),i.push(o)}e(i)}))},formatAddInvoiceList:function(t,e){return new Promise((function(i){var o=[];if(t&&t.titre){var n={table:"gestion_project_invoice_list",fields:{titre:t.titre,idcontents:""!==t.idcontents?t.idcontents:null,description:t.description,cout:t.cout,idinvoice:t.idinvoice}};1==e&&(n.where=[{column:"idinvoicelist",value:t.idinvoicelist}],n.action="update"),o.push(n)}i(o)}))},formatDeleteInvoiceList:function(t){return new Promise((function(e){var i=[];if(console.log("fadin :",t),t&&t.idinvoicelist){var o={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:t.idinvoicelist}]};i.push(o)}e(i)}))}};e["a"]=c},f0ae:function(t,e,i){"use strict";var o=i("b8a6");e["a"]={selectDatas:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"c.type",operator:"=",value:"project"}];return new Promise((function(i){var n="";if(n+=" select ",n+=" c.idcontents, c.text, c.titre, c.created_at, ",n+=" c.update_at, c.type, h.idhierachie, h.idcontentsparent, ",n+=" h.ordre, h.level",n+=" from ",n+=t.formatStringTable("gestion_project_hierachie")+" as h ",n+=" INNER JOIN ",n+=t.formatStringTable("gestion_project_contents")+" as c ",n+=" ON h.idcontents = c.idcontents ",e.length)for(var a in n+=" WHERE ",e)n+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";n+=" ORDER BY  c.`idcontents` DESC",n+=" limit 0,50 ",o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectTypes:function(){var t=this;return new Promise((function(e){var i="";i+=" select * ",i+=" from ",i+=t.formatStringTable("gestion_project_type"),i+=" limit 0,50 ",o["a"].post("/gestion-project/select",i).then((function(t){t.status?e(t.data):e([])}))}))},selectProject:function(t){var e=this;return new Promise((function(i){var n="";if(n+=" select * ",n+=" from ",n+=e.formatStringTable("gestion_project_contents"),t.length)for(var a in n+=" WHERE ",t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectFatureList:function(t){var e=this;return new Promise((function(i){var n="";if(n+=" select * ",n+=" from ",n+=e.formatStringTable("gestion_project_invoice_list"),t.length)for(var a in n+=" WHERE ",t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectInvoice:function(t){var e=this;return new Promise((function(i){var n="";if(n+=" select * ",n+=" from ",n+=e.formatStringTable("gestion_project_invoice"),t.length)for(var a in n+=" WHERE ",t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectClients:function(t){var e=this;return new Promise((function(i){var n="";if(n+=" select * ",n+=" from ",n+=e.formatStringTable("gestion_project_client"),t.length)for(var a in n+=" WHERE ",t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";n+=" limit 0,50 ",o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectSte:function(t){var e=this;return new Promise((function(i){var n="";if(n+=" select * ",n+=" from ",n+=e.formatStringTable("gestion_project_societe"),t.length)for(var a in n+=" WHERE ",t)n+=t[a].column+" "+t[a].operator+" '"+t[a].value+"' ";n+=" limit 0,50 ",o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectClient:function(t){var e=this;return new Promise((function(i){var n="";n+=" select * ",n+=" from ",n+=e.formatStringTable(t),n+=" limit 0,50 ",o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},selectAll:function(){var t=this;return new Promise((function(e){var i="";i+=" select * ",i+=" from ",i+=t.formatStringTable("gestion_project_contents"),i+=" order by update_at DESC ",i+=" limit 0,50 ",o["a"].post("/gestion-project/select",i).then((function(t){t.status?e(t.data):e([])}))}))},SelectTacheEnours:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{column:"t.status",operator:"=",value:2}];return new Promise((function(i){var n="";if(n+=" select ",n+=" c.idcontents, c.text, c.titre, c.created_at, ",n+=" c.update_at, c.type, h.idhierachie, h.idcontentsparent, ",n+=" h.ordre, h.level, ",n+=" t.status",n+=" from ",n+=t.formatStringTable("gestion_project_hierachie")+" as h ",n+=" INNER JOIN ",n+=t.formatStringTable("gestion_project_contents")+" as c ",n+=" ON h.idcontents = c.idcontents ",n+=" INNER JOIN ",n+=t.formatStringTable("gestion_project_times")+" as t ",n+=" ON t.idcontents = c.idcontents ",e.length)for(var a in n+=" WHERE ",e)n+=e[a].column+" "+e[a].operator+" '"+e[a].value+"' ";n+=" ORDER BY  c.`idcontents` DESC",n+=" limit 0,50 ",o["a"].post("/gestion-project/select",n).then((function(t){t.status?i(t.data):i([])}))}))},formatStringTable:function(t){return"{"+t+"}"}}},f840:function(t,e,i){t.exports=i.p+"img/universe png.f19c3c40.png"}}]);
//# sourceMappingURL=gestionTache.umd.min.8.js.map